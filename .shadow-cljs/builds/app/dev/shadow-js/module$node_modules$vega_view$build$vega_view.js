["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/vega-view/build/vega-view.js"],"~:js","shadow$provide.module$node_modules$vega_view$build$vega_view=function(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){(function(global,factory){\"object\"===typeof exports$jscomp$0&&\"undefined\"!==typeof module$jscomp$0?factory(exports$jscomp$0,require(\"module$node_modules$vega_util$build$vega_util\"),require(\"module$node_modules$vega_dataflow$build$vega_dataflow\"),require(\"module$node_modules$vega_scenegraph$build$vega_scenegraph\"),require(\"module$node_modules$d3_array$dist$d3_array\"),require(\"module$node_modules$vega_functions$build$vega_functions\"),\nrequire(\"module$node_modules$vega_runtime$build$vega_runtime\"),require(\"module$node_modules$d3_timer$dist$d3_timer\"),require(\"module$node_modules$vega_format$build$vega_format\")):\"function\"===typeof define&&define.amd?define(\"exports vega-util vega-dataflow vega-scenegraph d3-array vega-functions vega-runtime d3-timer vega-format\".split(\" \"),factory):(global=\"undefined\"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.vega,global.vega,global.vega,global.d3,global.vega,global.vega,\nglobal.d3,global.vega))})(this,function(exports,vegaUtil,vegaDataflow,vegaScenegraph,d3Array,vegaFunctions,vegaRuntime,d3Timer,vegaFormat){function initializeAria(view){var el=view.container();el&&(el.setAttribute(\"role\",\"graphics-document\"),el.setAttribute(\"aria-roleDescription\",\"visualization\"),ariaLabel(el,view.description()))}function ariaLabel(el,desc){el&&(null==desc?el.removeAttribute(\"aria-label\"):el.setAttribute(\"aria-label\",desc))}function background(view){view.add(null,function(_){view._background=\n_.bg;view._resize=1;return _.bg},{bg:view._signals.background})}function cursor(view){var cursor=view._signals.cursor||(view._signals.cursor=view.add({user:\"default\",item:null}));view.on(view.events(\"view\",\"mousemove\"),cursor,function(_,event){var user=(_=cursor.value)?vegaUtil.isString(_)?_:_.user:\"default\";event=event.item&&event.item.cursor||null;return _&&user===_.user&&event==_.item?_:{user:user,item:event}});view.add(null,function(_){_=_.cursor;var item=this.value;vegaUtil.isString(_)||(item=\n_.item,_=_.user);setCursor(view,_&&\"default\"!==_?_:item||_);return item},{cursor:cursor})}function setCursor(view,cursor){if(view=view.globalCursor()?\"undefined\"!==typeof document&&document.body:view.container())return null==cursor?view.style.removeProperty(\"cursor\"):view.style.cursor=cursor}function dataref(view,name){view=view._runtime.data;vegaUtil.hasOwnProperty(view,name)||vegaUtil.error(\"Unrecognized data set: \"+name);return view[name]}function change(name,changes){vegaDataflow.isChangeSet(changes)||\nvegaUtil.error(\"Second argument to changes must be a changeset.\");name=dataref(this,name);name.modified=!0;return this.pulse(name.input,changes)}function width$jscomp$0(view){var padding=view.padding();return Math.max(0,view._viewWidth+padding.left+padding.right)}function height$jscomp$0(view){var padding=view.padding();return Math.max(0,view._viewHeight+padding.top+padding.bottom)}function offset(view){var padding=view.padding();view=view._origin;return[padding.left+view[0],padding.top+view[1]]}\nfunction resizeRenderer(view){var origin=offset(view),w=width$jscomp$0(view),h=height$jscomp$0(view);view._renderer.background(view.background());view._renderer.resize(w,h,origin);view._handler.origin(origin);view._resizeListeners.forEach(function(handler){try{handler(w,h)}catch(error){view.error(error)}})}function eventExtend(view,event,item){var r=view._renderer;r=r&&r.canvas();if(r){var translate=offset(view);var p=event.changedTouches?event.changedTouches[0]:event;p=vegaScenegraph.point(p,r);\np[0]-=translate[0];p[1]-=translate[1]}event.dataflow=view;event.item=item;event.vega=extension(view,item,p);return event}function extension(view,item$jscomp$0,point){function group(name){var g=itemGroup,i;if(name)for(i=item$jscomp$0;i;i=i.mark.group)if(i.mark.name===name){g=i;break}return g&&g.mark&&g.mark.interactive?g:{}}function xy(item){if(!item)return point;vegaUtil.isString(item)&&(item=group(item));for(var p=point.slice();item;)p[0]-=item.x||0,p[1]-=item.y||0,item=item.mark&&item.mark.group;\nreturn p}var itemGroup=item$jscomp$0?\"group\"===item$jscomp$0.mark.marktype?item$jscomp$0:item$jscomp$0.mark.group:null;return{view:vegaUtil.constant(view),item:vegaUtil.constant(item$jscomp$0||{}),group:group,xy:xy,x:function(item){return xy(item)[0]},y:function(item){return xy(item)[1]}}}function initializeEventConfig(config){config=vegaUtil.extend({defaults:{}},config);var unpack=function(obj,keys){keys.forEach(function(k){vegaUtil.isArray(obj[k])&&(obj[k]=vegaUtil.toSet(obj[k]))})};unpack(config.defaults,\n[\"prevent\",\"allow\"]);unpack(config,[\"view\",\"window\",\"selector\"]);return config}function permit(view,key,type){var rule=view._eventConfig&&view._eventConfig[key];return!1===rule||vegaUtil.isObject(rule)&&!rule[type]?(view.warn(\"Blocked \"+key+\" \"+type+\" event listener.\"),!1):!0}function itemFilter(event){return event.item}function markTarget(event){return event.item.mark.source}function invoke(name){return function(_,event){return event.vega.view().changeset().encode(event.item,name)}}function element(tag,\nattr,text){tag=document.createElement(tag);for(var key in attr)tag.setAttribute(key,attr[key]);null!=text&&(tag.textContent=text);return tag}function bind$jscomp$0(view,el,binding){if(el){var param=binding.param,bind=binding.state;bind||(bind=binding.state={elements:null,active:!1,set:null,update:function(value){value!==view.signal(param.signal)&&view.runAsync(null,function(){bind.source=!0;view.signal(param.signal,value)})}},param.debounce&&(bind.update=vegaUtil.debounce(param.debounce,bind.update)));\ngenerate(bind,el,param,view.signal(param.signal));bind.active||(view.on(view._signals[param.signal],null,function(){bind.source?bind.source=!1:bind.set(view.signal(param.signal))}),bind.active=!0);return bind}}function generate(bind,el,param,value){var div=element(\"div\",{\"class\":\"vega-bind\"}),wrapper=\"radio\"===param.input?div:div.appendChild(element(\"label\"));wrapper.appendChild(element(\"span\",{\"class\":\"vega-bind-name\"},param.name||param.signal));el.appendChild(div);el=form;switch(param.input){case \"checkbox\":el=\ncheckbox;break;case \"select\":el=select;break;case \"radio\":el=radio;break;case \"range\":el=range}el(bind,wrapper,param,value)}function form(bind,el,param,value$jscomp$0){var node=element(\"input\"),key;for(key in param)\"signal\"!==key&&\"element\"!==key&&node.setAttribute(\"input\"===key?\"type\":key,param[key]);node.setAttribute(\"name\",param.signal);node.value=value$jscomp$0;el.appendChild(node);node.addEventListener(\"input\",function(){return bind.update(node.value)});bind.elements=[node];bind.set=function(value){return node.value=\nvalue}}function checkbox(bind,el,param,value$jscomp$0){param={type:\"checkbox\",name:param.signal};value$jscomp$0&&(param.checked=!0);var node=element(\"input\",param);el.appendChild(node);node.addEventListener(\"change\",function(){return bind.update(node.checked)});bind.elements=[node];bind.set=function(value){return node.checked=!!value||null}}function select(bind,el,param,value$jscomp$0){var node=element(\"select\",{name:param.signal}),labels=param.labels||[];param.options.forEach(function(option,i){var attr=\n{value:option};valuesEqual(option,value$jscomp$0)&&(attr.selected=!0);node.appendChild(element(\"option\",attr,(labels[i]||option)+\"\"))});el.appendChild(node);node.addEventListener(\"change\",function(){bind.update(param.options[node.selectedIndex])});bind.elements=[node];bind.set=function(value){for(var i=0,n=param.options.length;i<n;++i)if(valuesEqual(param.options[i],value)){node.selectedIndex=i;break}}}function radio(bind,el,param,value$jscomp$0){var group=element(\"span\",{\"class\":\"vega-bind-radio\"}),\nlabels=param.labels||[];el.appendChild(group);bind.elements=param.options.map(function(option,i){var attr={type:\"radio\",name:param.signal,value:option};valuesEqual(option,value$jscomp$0)&&(attr.checked=!0);attr=element(\"input\",attr);attr.addEventListener(\"change\",function(){return bind.update(option)});i=element(\"label\",{},(labels[i]||option)+\"\");i.prepend(attr);group.appendChild(i);return attr});bind.set=function(value){for(var nodes=bind.elements,n=nodes.length,i=0;i<n;++i)valuesEqual(nodes[i].value,\nvalue)&&(nodes[i].checked=!0)}}function range(bind,el,param,value$jscomp$0){value$jscomp$0=void 0!==value$jscomp$0?value$jscomp$0:(+param.max+ +param.min)/2;var max=null!=param.max?param.max:Math.max(100,+value$jscomp$0)||100,min=param.min||Math.min(0,max,+value$jscomp$0)||0,step=param.step||d3Array.tickStep(min,max,100),node=element(\"input\",{type:\"range\",name:param.signal,min:min,max:max,step:step});node.value=value$jscomp$0;var span=element(\"span\",{},+value$jscomp$0);el.appendChild(node);el.appendChild(span);\nel=function(){span.textContent=node.value;bind.update(+node.value)};node.addEventListener(\"input\",el);node.addEventListener(\"change\",el);bind.elements=[node];bind.set=function(value){node.value=value;span.textContent=value}}function valuesEqual(a,b){return a===b||a+\"\"===b+\"\"}function initializeRenderer(view,r,el,constructor,scaleFactor,opt){r=r||new constructor(view.loader());return r.initialize(el,width$jscomp$0(view),height$jscomp$0(view),offset(view),scaleFactor,opt).background(view.background())}\nfunction trap(view,fn){return fn?function(){try{fn.apply(this,arguments)}catch(error){view.error(error)}}:null}function initializeHandler(view,prevHandler,el,constructor){var handler=(new constructor(view.loader(),trap(view,view.tooltip()))).scene(view.scenegraph().root).initialize(el,offset(view),view);prevHandler&&prevHandler.handlers().forEach(function(h){handler.on(h.type,h.handler)});return handler}function lookup(view,el){if(\"string\"===typeof el)if(\"undefined\"!==typeof document){if(el=document.querySelector(el),\n!el)return view.error(\"Signal bind element not found: \"+el),null}else return view.error(\"DOM document instance not found.\"),null;if(el)try{el.innerHTML=\"\"}catch(e){el=null,view.error(e)}return el}function padding$jscomp$0(_){vegaUtil.isObject(_)?_={top:+_.top||0,bottom:+_.bottom||0,left:+_.left||0,right:+_.right||0}:(_=+_||0,_={top:_,bottom:_,left:_,right:_});return _}function renderHeadless(view,type,scaleFactor,opt){var module,ctr;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){return 1==\n$jscomp$generator$context.nextAddress?((ctr=(module=vegaScenegraph.renderModule(type))&&module.headless)||vegaUtil.error(\"Unrecognized renderer type: \"+type),$jscomp$generator$context.yield(view.runAsync(),2)):$jscomp$generator$context.return(initializeRenderer(view,null,null,ctr,scaleFactor,opt).renderAsync(view._scenegraph.root))})}function toBlobURL(data,mime){data=new Blob([data],{type:mime});return window.URL.createObjectURL(data)}function runtime(view,spec,expr){return vegaRuntime.context(view,\nvegaDataflow.transforms,vegaFunctions.functionContext,expr).parse(spec)}function viewWidth$jscomp$0(view,width){var a=view.autosize();view=view.padding();return width-(a&&\"padding\"===a.contains?view.left+view.right:0)}function viewHeight$jscomp$0(view,height){var a=view.autosize();view=view.padding();return height-(a&&\"padding\"===a.contains?view.top+view.bottom:0)}function initializeResize(view){function resetSize(){view._autosize=view._resize=1}var s=view._signals,w=s.width,h=s.height;s=s.padding;\nview._resizeWidth=view.add(null,function(_){view._width=_.size;view._viewWidth=viewWidth$jscomp$0(view,_.size);resetSize()},{size:w});view._resizeHeight=view.add(null,function(_){view._height=_.size;view._viewHeight=viewHeight$jscomp$0(view,_.size);resetSize()},{size:h});var resizePadding=view.add(null,resetSize,{pad:s});view._resizeWidth.rank=w.rank+1;view._resizeHeight.rank=h.rank+1;resizePadding.rank=s.rank+1}function dataTest(name,data){return data.modified&&vegaUtil.isArray(data.input.value)&&\nname.indexOf(\"_:vega:_\")}function signalTest(name,op){return!(\"parent\"===name||op instanceof vegaDataflow.transforms.proxy)}function defaultTooltip(handler,event,item,value){(handler=handler.element())&&handler.setAttribute(\"title\",formatTooltip(value))}function formatTooltip(value){return null==value?\"\":vegaUtil.isArray(value)?\"[\"+value.map(formatValue).join(\", \")+\"]\":vegaUtil.isObject(value)&&!vegaUtil.isDate(value)?formatObject(value):value+\"\"}function formatObject(obj){return Object.keys(obj).map(function(key){var v=\nobj[key];return key+\": \"+(vegaUtil.isArray(v)?\"[\"+v.map(formatValue).join(\", \")+\"]\":formatValue(v))}).join(\"\\n\")}function formatValue(value){return vegaUtil.isArray(value)?\"[…]\":vegaUtil.isObject(value)&&!vegaUtil.isDate(value)?\"{…}\":value}function View(spec,options){options=options||{};vegaDataflow.Dataflow.call(this);options.loader&&this.loader(options.loader);options.logger&&this.logger(options.logger);null!=options.logLevel&&this.logLevel(options.logLevel);if(options.locale||spec.locale){var loc=\nvegaUtil.extend({},spec.locale,options.locale);this.locale(vegaFormat.locale(loc.number,loc.time))}this._elBind=this._el=null;this._renderType=options.renderer||vegaScenegraph.RenderType.Canvas;this._scenegraph=new vegaScenegraph.Scenegraph;loc=this._scenegraph.root;this._renderer=null;this._tooltip=options.tooltip||defaultTooltip;this._redraw=!0;this._handler=(new vegaScenegraph.CanvasHandler).scene(loc);this._preventDefault=this._globalCursor=!1;this._timers=[];this._eventListeners=[];this._resizeListeners=\n[];this._eventConfig=initializeEventConfig(spec.eventConfig);this.globalCursor(this._eventConfig.globalCursor);var ctx=runtime(this,spec,options.expr);this._runtime=ctx;this._signals=ctx.signals;this._bind=(spec.bindings||[]).map(function(_){return{state:null,param:vegaUtil.extend({},_)}});ctx.root&&ctx.root.set(loc);loc.source=ctx.data.root.input;this.pulse(ctx.data.root.input,this.changeset().insert(loc.items));this._width=this.width();this._height=this.height();this._viewWidth=viewWidth$jscomp$0(this,\nthis._width);this._viewHeight=viewHeight$jscomp$0(this,this._height);this._origin=[0,0];this._resize=0;this._autosize=1;initializeResize(this);background(this);cursor(this);this.description(spec.description);options.hover&&this.hover();options.container&&this.initialize(options.container,options.bind)}function lookupSignal(view,name){return vegaUtil.hasOwnProperty(view._signals,name)?view._signals[name]:vegaUtil.error(\"Unrecognized signal name: \"+vegaUtil.stringValue(name))}function findOperatorHandler(op$jscomp$0,\nhandler){op$jscomp$0=(op$jscomp$0._targets||[]).filter(function(op){return op._update&&op._update.handler===handler});return op$jscomp$0.length?op$jscomp$0[0]:null}function addOperatorListener(view,name,op,handler){var h=findOperatorHandler(op,handler);h||(h=trap(view,function(){return handler(name,op.value)}),h.handler=handler,view.on(op,null,h));return view}function removeOperatorListener(view,op,handler){(handler=findOperatorHandler(op,handler))&&op._targets.remove(handler);return view}var NO_TRAP=\n{trap:!1},Skip={skip:!0};vegaUtil.inherits(View,vegaDataflow.Dataflow,{evaluate:function(encode,prerun,postrun){var $jscomp$async$this=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:return $jscomp$generator$context.yield(vegaDataflow.Dataflow.prototype.evaluate.call($jscomp$async$this,encode,prerun),2);case 2:if(!$jscomp$async$this._redraw&&!$jscomp$async$this._resize){$jscomp$generator$context.jumpTo(3);\nbreak}$jscomp$generator$context.setCatchFinallyBlocks(4);if(!$jscomp$async$this._renderer){$jscomp$generator$context.jumpTo(6);break}$jscomp$async$this._resize&&($jscomp$async$this._resize=0,resizeRenderer($jscomp$async$this));return $jscomp$generator$context.yield($jscomp$async$this._renderer.renderAsync($jscomp$async$this._scenegraph.root),6);case 6:$jscomp$async$this._redraw=!1;$jscomp$generator$context.leaveTryBlock(3);break;case 4:e=$jscomp$generator$context.enterCatchBlock(),$jscomp$async$this.error(e);\ncase 3:return postrun&&vegaDataflow.asyncCallback($jscomp$async$this,postrun),$jscomp$generator$context.return($jscomp$async$this)}})},dirty:function(item){this._redraw=!0;this._renderer&&this._renderer.dirty(item)},description:function(text){if(arguments.length){var desc=null!=text?text+\"\":null;desc!==this._desc&&ariaLabel(this._el,this._desc=desc);return this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},\nsignal:function(name,value,options){var op=lookupSignal(this,name);return 1===arguments.length?op.value:this.update(op,value,options)},width:function(_){return arguments.length?this.signal(\"width\",_):this.signal(\"width\")},height:function(_){return arguments.length?this.signal(\"height\",_):this.signal(\"height\")},padding:function(_){return arguments.length?this.signal(\"padding\",padding$jscomp$0(_)):padding$jscomp$0(this.signal(\"padding\"))},autosize:function(_){return arguments.length?this.signal(\"autosize\",\n_):this.signal(\"autosize\")},background:function(_){return arguments.length?this.signal(\"background\",_):this.signal(\"background\")},renderer:function(type){if(!arguments.length)return this._renderType;vegaScenegraph.renderModule(type)||vegaUtil.error(\"Unrecognized renderer type: \"+type);type!==this._renderType&&(this._renderType=type,this._resetRenderer());return this},tooltip:function(handler){if(!arguments.length)return this._tooltip;handler!==this._tooltip&&(this._tooltip=handler,this._resetRenderer());\nreturn this},loader:function(loader){if(!arguments.length)return this._loader;loader!==this._loader&&(vegaDataflow.Dataflow.prototype.loader.call(this,loader),this._resetRenderer());return this},resize:function(){this._autosize=1;return this.touch(lookupSignal(this,\"autosize\"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(viewWidth,viewHeight,width,height,origin,auto){this.runAfter(function(view){var rerun=0;view._autosize=\n0;view.width()!==width&&(rerun=1,view.signal(\"width\",width,Skip),view._resizeWidth.skip(!0));view.height()!==height&&(rerun=1,view.signal(\"height\",height,Skip),view._resizeHeight.skip(!0));view._viewWidth!==viewWidth&&(view._resize=1,view._viewWidth=viewWidth);view._viewHeight!==viewHeight&&(view._resize=1,view._viewHeight=viewHeight);if(view._origin[0]!==origin[0]||view._origin[1]!==origin[1])view._resize=1,view._origin=origin;rerun&&view.run(\"enter\");auto&&view.runAfter(function(v){return v.resize()})},\n!1,1)},addEventListener:function(type,handler,options){var callback=handler;options&&!1===options.trap||(callback=trap(this,handler),callback.raw=handler);this._handler.on(type,callback);return this},removeEventListener:function(type,handler){for(var handlers=this._handler.handlers(type),i=handlers.length,h,t;0<=--i;)if(t=handlers[i].type,h=handlers[i].handler,type===t&&(handler===h||handler===h.raw)){this._handler.off(t,h);break}return this},addResizeListener:function(handler){var l=this._resizeListeners;\n0>l.indexOf(handler)&&l.push(handler);return this},removeResizeListener:function(handler){var l=this._resizeListeners;handler=l.indexOf(handler);0<=handler&&l.splice(handler,1);return this},addSignalListener:function(name,handler){return addOperatorListener(this,name,lookupSignal(this,name),handler)},removeSignalListener:function(name,handler){return removeOperatorListener(this,lookupSignal(this,name),handler)},addDataListener:function(name,handler){return addOperatorListener(this,name,dataref(this,\nname).values,handler)},removeDataListener:function(name,handler){return removeOperatorListener(this,dataref(this,name).values,handler)},globalCursor:function(_){if(arguments.length){if(this._globalCursor!==!!_){var prev=setCursor(this,null);this._globalCursor=!!_;prev&&setCursor(this,prev)}return this}return this._globalCursor},preventDefault:function(_){return arguments.length?(this._preventDefault=_,this):this._preventDefault},timer:function(callback,delay){this._timers.push(d3Timer.interval(function(elapsed){callback({timestamp:Date.now(),\nelapsed:elapsed})},delay))},events:function(source,type,filter){var view=this,s=new vegaDataflow.EventStream(filter);filter=function(e,item){view.runAsync(null,function(){var JSCompiler_temp;if(JSCompiler_temp=\"view\"===source){var def=view._eventConfig.defaults;JSCompiler_temp=def.prevent;def=def.allow;JSCompiler_temp=!1===JSCompiler_temp||!0===def?!1:!0===JSCompiler_temp||!1===def?!0:JSCompiler_temp?JSCompiler_temp[type]:def?!def[type]:view.preventDefault()}JSCompiler_temp&&e.preventDefault();s.receive(eventExtend(view,\ne,item))})};var sources;if(\"timer\"===source)permit(view,\"timer\",type)&&view.timer(filter,type);else if(\"view\"===source)permit(view,\"view\",type)&&view.addEventListener(type,filter,NO_TRAP);else if(\"window\"===source?permit(view,\"window\",type)&&\"undefined\"!==typeof window&&(sources=[window]):\"undefined\"!==typeof document&&permit(view,\"selector\",type)&&(sources=document.querySelectorAll(source)),sources){for(var i=0,n=sources.length;i<n;++i)sources[i].addEventListener(type,filter);view._eventListeners.push({type:type,\nsources:sources,handler:filter})}else view.warn(\"Can not resolve event source: \"+source);return s},finalize:function(){var tooltip=this._tooltip,timers=this._timers,listeners=this._eventListeners,n;for(n=timers.length;0<=--n;)timers[n].stop();for(n=listeners.length;0<=--n;){var e=listeners[n];for(timers=e.sources.length;0<=--timers;)e.sources[timers].removeEventListener(e.type,e.handler)}tooltip&&tooltip.call(this,this._handler,null,null,null);return this},hover:function(hoverSet,leaveSet){hoverSet=\n[hoverSet||\"hover\"];leaveSet=[leaveSet||\"update\",hoverSet[0]];this.on(this.events(\"view\",\"mouseover\",itemFilter),markTarget,invoke(hoverSet));this.on(this.events(\"view\",\"mouseout\",itemFilter),markTarget,invoke(leaveSet));return this},data:function(name,values){return 2>arguments.length?dataref(this,name).values.value:change.call(this,name,vegaDataflow.changeset().remove(vegaUtil.truthy).insert(values))},change:change,insert:function(name,_){return change.call(this,name,vegaDataflow.changeset().insert(_))},\nremove:function(name,_){return change.call(this,name,vegaDataflow.changeset().remove(_))},scale:function(name){var scales=this._runtime.scales;vegaUtil.hasOwnProperty(scales,name)||vegaUtil.error(\"Unrecognized scale or projection: \"+name);return scales[name].value},initialize:function(el,elBind){var view=this,type=view._renderType,config=view._eventConfig.bind,module=vegaScenegraph.renderModule(type);el=view._el=el?lookup(view,el):null;initializeAria(view);module||view.error(\"Unrecognized renderer type: \"+\ntype);type=module.handler||vegaScenegraph.CanvasHandler;module=el?module.renderer:module.headless;view._renderer=module?initializeRenderer(view,view._renderer,el,module):null;view._handler=initializeHandler(view,view._handler,el,type);view._redraw=!0;el&&\"none\"!==config&&(elBind=elBind?view._elBind=lookup(view,elBind):el.appendChild(element(\"form\",{\"class\":\"vega-bindings\"})),view._bind.forEach(function(_){_.param.element&&\"container\"!==config&&(_.element=lookup(view,_.param.element))}),view._bind.forEach(function(_){bind$jscomp$0(view,\n_.element||elBind,_)}));return view},toImageURL:function(type,scaleFactor){var $jscomp$async$this=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return type!==vegaScenegraph.RenderType.Canvas&&type!==vegaScenegraph.RenderType.SVG&&type!==vegaScenegraph.RenderType.PNG&&vegaUtil.error(\"Unrecognized image type: \"+type),$jscomp$generator$context.yield(renderHeadless($jscomp$async$this,type,scaleFactor),2);r=$jscomp$generator$context.yieldResult;\nreturn $jscomp$generator$context.return(type===vegaScenegraph.RenderType.SVG?toBlobURL(r.svg(),\"image/svg+xml\"):r.canvas().toDataURL(\"image/png\"))})},toCanvas:function(scaleFactor,opt){var $jscomp$async$this=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield(renderHeadless($jscomp$async$this,vegaScenegraph.RenderType.Canvas,scaleFactor,opt),2);r=$jscomp$generator$context.yieldResult;\nreturn $jscomp$generator$context.return(r.canvas())})},toSVG:function(scaleFactor){var $jscomp$async$this=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield(renderHeadless($jscomp$async$this,vegaScenegraph.RenderType.SVG,scaleFactor),2);r=$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(r.svg())})},getState:function(options){return this._runtime.getState(options||\n{data:dataTest,signals:signalTest,recurse:!0})},setState:function(state){this.runAsync(null,function(v){v._trigger=!1;v._runtime.setState(state)},function(v){v._trigger=!0});return this}});exports.View=View;Object.defineProperty(exports,\"__esModule\",{value:!0})})}","~:source","shadow$provide[\"module$node_modules$vega_view$build$vega_view\"] = function(global,require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-dataflow'), require('vega-scenegraph'), require('d3-array'), require('vega-functions'), require('vega-runtime'), require('d3-timer'), require('vega-format')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-dataflow', 'vega-scenegraph', 'd3-array', 'vega-functions', 'vega-runtime', 'd3-timer', 'vega-format'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.vega, global.d3, global.vega, global.vega, global.d3, global.vega));\n}(this, (function (exports, vegaUtil, vegaDataflow, vegaScenegraph, d3Array, vegaFunctions, vegaRuntime, d3Timer, vegaFormat) { 'use strict';\n\n  // initialize aria role and label attributes\n  function initializeAria(view) {\n    const el = view.container();\n    if (el) {\n      el.setAttribute('role', 'graphics-document');\n      el.setAttribute('aria-roleDescription', 'visualization');\n      ariaLabel(el, view.description());\n    }\n  }\n\n  // update aria-label if we have a DOM container element\n  function ariaLabel(el, desc) {\n    if (el) desc == null\n      ? el.removeAttribute('aria-label')\n      : el.setAttribute('aria-label', desc);\n  }\n\n  function background(view) {\n    // respond to background signal\n    view.add(null, _ => {\n      view._background = _.bg;\n      view._resize = 1;\n      return _.bg;\n    }, { bg: view._signals.background });\n  }\n\n  const Default = 'default';\n\n  function cursor(view) {\n    // get cursor signal, add to dataflow if needed\n    const cursor = view._signals.cursor || (view._signals.cursor = view.add({\n      user: Default,\n      item: null\n    }));\n\n    // evaluate cursor on each mousemove event\n    view.on(view.events('view', 'mousemove'), cursor,\n      (_, event) => {\n        const value = cursor.value,\n              user = value ? (vegaUtil.isString(value) ? value : value.user) : Default,\n              item = event.item && event.item.cursor || null;\n\n        return (value && user === value.user && item == value.item)\n          ? value\n          : {user: user, item: item};\n      }\n    );\n\n    // when cursor signal updates, set visible cursor\n    view.add(null, function(_) {\n      let user = _.cursor,\n          item = this.value;\n\n      if (!vegaUtil.isString(user)) {\n        item = user.item;\n        user = user.user;\n      }\n\n      setCursor(view, user && user !== Default ? user : (item || user));\n\n      return item;\n    }, {cursor: cursor});\n  }\n\n  function setCursor(view, cursor) {\n    const el = view.globalCursor()\n      ? (typeof document !== 'undefined' && document.body)\n      : view.container();\n\n    if (el) {\n      return cursor == null\n        ? el.style.removeProperty('cursor')\n        : (el.style.cursor = cursor);\n    }\n  }\n\n  function dataref(view, name) {\n    var data = view._runtime.data;\n    if (!vegaUtil.hasOwnProperty(data, name)) {\n      vegaUtil.error('Unrecognized data set: ' + name);\n    }\n    return data[name];\n  }\n\n  function data(name, values) {\n    return arguments.length < 2\n      ? dataref(this, name).values.value\n      : change.call(this, name, vegaDataflow.changeset().remove(vegaUtil.truthy).insert(values));\n  }\n\n  function change(name, changes) {\n    if (!vegaDataflow.isChangeSet(changes)) {\n      vegaUtil.error('Second argument to changes must be a changeset.');\n    }\n    var dataset = dataref(this, name);\n    dataset.modified = true;\n    return this.pulse(dataset.input, changes);\n  }\n\n  function insert(name, _) {\n    return change.call(this, name, vegaDataflow.changeset().insert(_));\n  }\n\n  function remove(name, _) {\n    return change.call(this, name, vegaDataflow.changeset().remove(_));\n  }\n\n  function width(view) {\n    var padding = view.padding();\n    return Math.max(0, view._viewWidth + padding.left + padding.right);\n  }\n\n  function height(view) {\n    var padding = view.padding();\n    return Math.max(0, view._viewHeight + padding.top + padding.bottom);\n  }\n\n  function offset(view) {\n    var padding = view.padding(),\n        origin = view._origin;\n    return [\n      padding.left + origin[0],\n      padding.top + origin[1]\n    ];\n  }\n\n  function resizeRenderer(view) {\n    var origin = offset(view),\n        w = width(view),\n        h = height(view);\n\n    view._renderer.background(view.background());\n    view._renderer.resize(w, h, origin);\n    view._handler.origin(origin);\n\n    view._resizeListeners.forEach(handler => {\n      try {\n        handler(w, h);\n      } catch (error) {\n        view.error(error);\n      }\n    });\n  }\n\n  /**\n   * Extend an event with additional view-specific methods.\n   * Adds a new property ('vega') to an event that provides a number\n   * of methods for querying information about the current interaction.\n   * The vega object provides the following methods:\n   *   view - Returns the backing View instance.\n   *   item - Returns the currently active scenegraph item (if any).\n   *   group - Returns the currently active scenegraph group (if any).\n   *     This method accepts a single string-typed argument indicating the name\n   *     of the desired parent group. The scenegraph will be traversed from\n   *     the item up towards the root to search for a matching group. If no\n   *     argument is provided the enclosing group for the active item is\n   *     returned, unless the item it itself a group, in which case it is\n   *     returned directly.\n   *   xy - Returns a two-element array containing the x and y coordinates for\n   *     mouse or touch events. For touch events, this is based on the first\n   *     elements in the changedTouches array. This method accepts a single\n   *     argument: either an item instance or mark name that should serve as\n   *     the reference coordinate system. If no argument is provided the\n   *     top-level view coordinate system is assumed.\n   *   x - Returns the current x-coordinate, accepts the same arguments as xy.\n   *   y - Returns the current y-coordinate, accepts the same arguments as xy.\n   * @param {Event} event - The input event to extend.\n   * @param {Item} item - The currently active scenegraph item (if any).\n   * @return {Event} - The extended input event.\n   */\n  function eventExtend(view, event, item) {\n    var r  = view._renderer,\n        el = r && r.canvas(),\n        p, e, translate;\n\n    if (el) {\n      translate = offset(view);\n      e = event.changedTouches ? event.changedTouches[0] : event;\n      p = vegaScenegraph.point(e, el);\n      p[0] -= translate[0];\n      p[1] -= translate[1];\n    }\n\n    event.dataflow = view;\n    event.item = item;\n    event.vega = extension(view, item, p);\n    return event;\n  }\n\n  function extension(view, item, point) {\n    var itemGroup = item\n      ? item.mark.marktype === 'group' ? item : item.mark.group\n      : null;\n\n    function group(name) {\n      var g = itemGroup, i;\n      if (name) for (i = item; i; i = i.mark.group) {\n        if (i.mark.name === name) { g = i; break; }\n      }\n      return g && g.mark && g.mark.interactive ? g : {};\n    }\n\n    function xy(item) {\n      if (!item) return point;\n      if (vegaUtil.isString(item)) item = group(item);\n\n      var p = point.slice();\n      while (item) {\n        p[0] -= item.x || 0;\n        p[1] -= item.y || 0;\n        item = item.mark && item.mark.group;\n      }\n      return p;\n    }\n\n    return {\n      view:  vegaUtil.constant(view),\n      item:  vegaUtil.constant(item || {}),\n      group: group,\n      xy:    xy,\n      x:     function(item) { return xy(item)[0]; },\n      y:     function(item) { return xy(item)[1]; }\n    };\n  }\n\n  const VIEW = 'view',\n        TIMER = 'timer',\n        WINDOW = 'window',\n        NO_TRAP = {trap: false};\n\n  /**\n   * Initialize event handling configuration.\n   * @param {object} config - The configuration settings.\n   * @return {object}\n   */\n  function initializeEventConfig(config) {\n    const events = vegaUtil.extend({defaults: {}}, config);\n\n    const unpack = (obj, keys) => {\n      keys.forEach(k => {\n        if (vegaUtil.isArray(obj[k])) obj[k] = vegaUtil.toSet(obj[k]);\n      });\n    };\n\n    unpack(events.defaults, ['prevent', 'allow']);\n    unpack(events, ['view', 'window', 'selector']);\n\n    return events;\n  }\n\n  function prevent(view, type) {\n    var def = view._eventConfig.defaults,\n        prevent = def.prevent,\n        allow = def.allow;\n\n    return prevent === false || allow === true ? false\n      : prevent === true || allow === false ? true\n      : prevent ? prevent[type]\n      : allow ? !allow[type]\n      : view.preventDefault();\n  }\n\n  function permit(view, key, type) {\n    const rule = view._eventConfig && view._eventConfig[key];\n\n    if (rule === false || (vegaUtil.isObject(rule) && !rule[type])) {\n      view.warn(`Blocked ${key} ${type} event listener.`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Create a new event stream from an event source.\n   * @param {object} source - The event source to monitor.\n   * @param {string} type - The event type.\n   * @param {function(object): boolean} [filter] - Event filter function.\n   * @return {EventStream}\n   */\n  function events(source, type, filter) {\n    var view = this,\n        s = new vegaDataflow.EventStream(filter),\n        send = function(e, item) {\n          view.runAsync(null, () => {\n            if (source === VIEW && prevent(view, type)) {\n              e.preventDefault();\n            }\n            s.receive(eventExtend(view, e, item));\n          });\n        },\n        sources;\n\n    if (source === TIMER) {\n      if (permit(view, 'timer', type)) {\n        view.timer(send, type);\n      }\n    }\n\n    else if (source === VIEW) {\n      if (permit(view, 'view', type)) {\n        // send traps errors, so use {trap: false} option\n        view.addEventListener(type, send, NO_TRAP);\n      }\n    }\n\n    else {\n      if (source === WINDOW) {\n        if (permit(view, 'window', type) && typeof window !== 'undefined') {\n          sources = [window];\n        }\n      } else if (typeof document !== 'undefined') {\n        if (permit(view, 'selector', type)) {\n          sources = document.querySelectorAll(source);\n        }\n      }\n\n      if (!sources) {\n        view.warn('Can not resolve event source: ' + source);\n      } else {\n        for (var i=0, n=sources.length; i<n; ++i) {\n          sources[i].addEventListener(type, send);\n        }\n\n        view._eventListeners.push({\n          type:    type,\n          sources: sources,\n          handler: send\n        });\n      }\n    }\n\n    return s;\n  }\n\n  function itemFilter(event) {\n    return event.item;\n  }\n\n  function markTarget(event) {\n    // grab upstream collector feeding the mark operator\n    return event.item.mark.source;\n  }\n\n  function invoke(name) {\n    return function(_, event) {\n      return event.vega.view()\n        .changeset()\n        .encode(event.item, name);\n    };\n  }\n\n  function hover(hoverSet, leaveSet) {\n    hoverSet = [hoverSet || 'hover'];\n    leaveSet = [leaveSet || 'update', hoverSet[0]];\n\n    // invoke hover set upon mouseover\n    this.on(\n      this.events('view', 'mouseover', itemFilter),\n      markTarget,\n      invoke(hoverSet)\n    );\n\n    // invoke leave set upon mouseout\n    this.on(\n      this.events('view', 'mouseout', itemFilter),\n      markTarget,\n      invoke(leaveSet)\n    );\n\n    return this;\n  }\n\n  /**\n   * Finalize a View instance that is being removed.\n   * Cancel any running timers.\n   * Remove all external event listeners.\n   * Remove any currently displayed tooltip.\n   */\n  function finalize() {\n    var tooltip = this._tooltip,\n        timers = this._timers,\n        listeners = this._eventListeners,\n        n, m, e;\n\n    n = timers.length;\n    while (--n >= 0) {\n      timers[n].stop();\n    }\n\n    n = listeners.length;\n    while (--n >= 0) {\n      e = listeners[n];\n      m = e.sources.length;\n      while (--m >= 0) {\n        e.sources[m].removeEventListener(e.type, e.handler);\n      }\n    }\n\n    if (tooltip) {\n      tooltip.call(this, this._handler, null, null, null);\n    }\n\n    return this;\n  }\n\n  function element(tag, attr, text) {\n    var el = document.createElement(tag);\n    for (var key in attr) el.setAttribute(key, attr[key]);\n    if (text != null) el.textContent = text;\n    return el;\n  }\n\n  const BindClass = 'vega-bind',\n        NameClass = 'vega-bind-name',\n        RadioClass = 'vega-bind-radio';\n\n  /**\n   * Bind a signal to an external HTML input element. The resulting two-way\n   * binding will propagate input changes to signals, and propagate signal\n   * changes to the input element state. If this view instance has no parent\n   * element, we assume the view is headless and no bindings are created.\n   * @param {Element|string} el - The parent DOM element to which the input\n   *   element should be appended as a child. If string-valued, this argument\n   *   will be treated as a CSS selector. If null or undefined, the parent\n   *   element of this view will be used as the element.\n   * @param {object} param - The binding parameters which specify the signal\n   *   to bind to, the input element type, and type-specific configuration.\n   * @return {View} - This view instance.\n   */\n  function bind(view, el, binding) {\n    if (!el) return;\n\n    const param = binding.param;\n    let bind = binding.state;\n\n    if (!bind) {\n      bind = binding.state = {\n        elements: null,\n        active: false,\n        set: null,\n        update: value => {\n          if (value !== view.signal(param.signal)) {\n            view.runAsync(null, () => {\n              bind.source = true;\n              view.signal(param.signal, value);\n            });\n          }\n        }\n      };\n      if (param.debounce) {\n        bind.update = vegaUtil.debounce(param.debounce, bind.update);\n      }\n    }\n\n    generate(bind, el, param, view.signal(param.signal));\n\n    if (!bind.active) {\n      view.on(view._signals[param.signal], null, () => {\n        bind.source\n          ? (bind.source = false)\n          : bind.set(view.signal(param.signal));\n      });\n      bind.active = true;\n    }\n\n    return bind;\n  }\n\n  /**\n   * Generate an HTML input form element and bind it to a signal.\n   */\n  function generate(bind, el, param, value) {\n    const div = element('div', {'class': BindClass});\n\n    const wrapper = param.input === 'radio'\n      ? div\n      : div.appendChild(element('label'));\n\n    wrapper.appendChild(element('span',\n      {'class': NameClass},\n      (param.name || param.signal)\n    ));\n\n    el.appendChild(div);\n\n    let input = form;\n    switch (param.input) {\n      case 'checkbox': input = checkbox; break;\n      case 'select':   input = select; break;\n      case 'radio':    input = radio; break;\n      case 'range':    input = range; break;\n    }\n\n    input(bind, wrapper, param, value);\n  }\n\n  /**\n   * Generates an arbitrary input form element.\n   * The input type is controlled via user-provided parameters.\n   */\n  function form(bind, el, param, value) {\n    const node = element('input');\n\n    for (const key in param) {\n      if (key !== 'signal' && key !== 'element') {\n        node.setAttribute(key === 'input' ? 'type' : key, param[key]);\n      }\n    }\n    node.setAttribute('name', param.signal);\n    node.value = value;\n\n    el.appendChild(node);\n    node.addEventListener('input', () => bind.update(node.value));\n\n    bind.elements = [node];\n    bind.set = value => node.value = value;\n  }\n\n  /**\n   * Generates a checkbox input element.\n   */\n  function checkbox(bind, el, param, value) {\n    const attr = {type: 'checkbox', name: param.signal};\n    if (value) attr.checked = true;\n    const node = element('input', attr);\n\n    el.appendChild(node);\n    node.addEventListener('change', () => bind.update(node.checked));\n\n    bind.elements = [node];\n    bind.set = value => node.checked = !!value || null;\n  }\n\n  /**\n   * Generates a selection list input element.\n   */\n  function select(bind, el, param, value) {\n    const node = element('select', {name: param.signal}),\n          labels = param.labels || [];\n\n    param.options.forEach((option, i) => {\n      const attr = {value: option};\n      if (valuesEqual(option, value)) attr.selected = true;\n      node.appendChild(element('option', attr, (labels[i] || option)+''));\n    });\n\n    el.appendChild(node);\n\n    node.addEventListener('change', () => {\n      bind.update(param.options[node.selectedIndex]);\n    });\n\n    bind.elements = [node];\n    bind.set = value => {\n      for (let i = 0, n = param.options.length; i < n; ++i) {\n        if (valuesEqual(param.options[i], value)) {\n          node.selectedIndex = i; return;\n        }\n      }\n    };\n  }\n\n  /**\n   * Generates a radio button group.\n   */\n  function radio(bind, el, param, value) {\n    const group = element('span', {'class': RadioClass}),\n          labels = param.labels || [];\n\n    el.appendChild(group);\n\n    bind.elements = param.options.map((option, i) => {\n      const attr = {\n        type:  'radio',\n        name:  param.signal,\n        value: option\n      };\n      if (valuesEqual(option, value)) attr.checked = true;\n\n      const input = element('input', attr);\n      input.addEventListener('change', () => bind.update(option));\n\n      const label = element('label', {}, (labels[i] || option)+'');\n      label.prepend(input);\n      group.appendChild(label);\n\n      return input;\n    });\n\n    bind.set = value => {\n      const nodes = bind.elements,\n            n = nodes.length;\n      for (let i = 0; i < n; ++i) {\n        if (valuesEqual(nodes[i].value, value)) nodes[i].checked = true;\n      }\n    };\n  }\n\n  /**\n   * Generates a slider input element.\n   */\n  function range(bind, el, param, value) {\n    value = value !== undefined ? value : ((+param.max) + (+param.min)) / 2;\n\n    const max = param.max != null ? param.max : Math.max(100, +value) || 100,\n          min = param.min || Math.min(0, max, +value) || 0,\n          step = param.step || d3Array.tickStep(min, max, 100);\n\n    const node = element('input', {\n      type:  'range',\n      name:  param.signal,\n      min:   min,\n      max:   max,\n      step:  step\n    });\n    node.value = value;\n\n    const span = element('span', {}, +value);\n\n    el.appendChild(node);\n    el.appendChild(span);\n\n    const update = () => {\n      span.textContent = node.value;\n      bind.update(+node.value);\n    };\n\n    // subscribe to both input and change\n    node.addEventListener('input', update);\n    node.addEventListener('change', update);\n\n    bind.elements = [node];\n    bind.set = value => {\n      node.value = value;\n      span.textContent = value;\n    };\n  }\n\n  function valuesEqual(a, b) {\n    return a === b || (a+'' === b+'');\n  }\n\n  function initializeRenderer(view, r, el, constructor, scaleFactor, opt) {\n    r = r || new constructor(view.loader());\n    return r\n      .initialize(el, width(view), height(view), offset(view), scaleFactor, opt)\n      .background(view.background());\n  }\n\n  function trap(view, fn) {\n    return !fn ? null : function() {\n      try {\n        fn.apply(this, arguments);\n      } catch (error) {\n        view.error(error);\n      }\n    };\n  }\n\n  function initializeHandler(view, prevHandler, el, constructor) {\n    // instantiate scenegraph handler\n    var handler = new constructor(view.loader(), trap(view, view.tooltip()))\n      .scene(view.scenegraph().root)\n      .initialize(el, offset(view), view);\n\n    // transfer event handlers\n    if (prevHandler) {\n      prevHandler.handlers().forEach(h => {\n        handler.on(h.type, h.handler);\n      });\n    }\n\n    return handler;\n  }\n\n  function initialize(el, elBind) {\n    const view = this,\n          type = view._renderType,\n          config = view._eventConfig.bind,\n          module = vegaScenegraph.renderModule(type);\n\n    // containing dom element\n    el = view._el = el ? lookup(view, el) : null;\n\n    // initialize aria attributes\n    initializeAria(view);\n\n    // select appropriate renderer & handler\n    if (!module) view.error('Unrecognized renderer type: ' + type);\n    const Handler = module.handler || vegaScenegraph.CanvasHandler,\n          Renderer = (el ? module.renderer : module.headless);\n\n    // initialize renderer and input handler\n    view._renderer = !Renderer ? null\n      : initializeRenderer(view, view._renderer, el, Renderer);\n    view._handler = initializeHandler(view, view._handler, el, Handler);\n    view._redraw = true;\n\n    // initialize signal bindings\n    if (el && config !== 'none') {\n      elBind = elBind ? (view._elBind = lookup(view, elBind))\n        : el.appendChild(element('form', {'class': 'vega-bindings'}));\n\n      view._bind.forEach(_ => {\n        if (_.param.element && config !== 'container') {\n          _.element = lookup(view, _.param.element);\n        }\n      });\n\n      view._bind.forEach(_ => {\n        bind(view, _.element || elBind, _);\n      });\n    }\n\n    return view;\n  }\n\n  function lookup(view, el) {\n    if (typeof el === 'string') {\n      if (typeof document !== 'undefined') {\n        el = document.querySelector(el);\n        if (!el) {\n          view.error('Signal bind element not found: ' + el);\n          return null;\n        }\n      } else {\n        view.error('DOM document instance not found.');\n        return null;\n      }\n    }\n    if (el) {\n      try {\n        el.innerHTML = '';\n      } catch (e) {\n        el = null;\n        view.error(e);\n      }\n    }\n    return el;\n  }\n\n  const number = _ => +_ || 0;\n\n  const paddingObject = _ => ({top: _, bottom: _, left: _, right: _});\n\n  function padding(_) {\n    return vegaUtil.isObject(_)\n      ? {\n          top:    number(_.top),\n          bottom: number(_.bottom),\n          left:   number(_.left),\n          right:  number(_.right)\n        }\n      : paddingObject(number(_));\n  }\n\n  /**\n   * Render the current scene in a headless fashion.\n   * This method is asynchronous, returning a Promise instance.\n   * @return {Promise} - A Promise that resolves to a renderer.\n   */\n  async function renderHeadless(view, type, scaleFactor, opt) {\n    const module = vegaScenegraph.renderModule(type),\n          ctr = module && module.headless;\n\n    if (!ctr) vegaUtil.error('Unrecognized renderer type: ' + type);\n\n    await view.runAsync();\n    return initializeRenderer(view, null, null, ctr, scaleFactor, opt)\n      .renderAsync(view._scenegraph.root);\n  }\n\n  /**\n   * Produce an image URL for the visualization. Depending on the type\n   * parameter, the generated URL contains data for either a PNG or SVG image.\n   * The URL can be used (for example) to download images of the visualization.\n   * This method is asynchronous, returning a Promise instance.\n   * @param {string} type - The image type. One of 'svg', 'png' or 'canvas'.\n   *   The 'canvas' and 'png' types are synonyms for a PNG image.\n   * @return {Promise} - A promise that resolves to an image URL.\n   */\n  async function renderToImageURL(type, scaleFactor) {\n    if (type !== vegaScenegraph.RenderType.Canvas && type !== vegaScenegraph.RenderType.SVG && type !== vegaScenegraph.RenderType.PNG) {\n      vegaUtil.error('Unrecognized image type: ' + type);\n    }\n\n    const r = await renderHeadless(this, type, scaleFactor);\n    return type === vegaScenegraph.RenderType.SVG\n      ? toBlobURL(r.svg(), 'image/svg+xml')\n      : r.canvas().toDataURL('image/png');\n  }\n\n  function toBlobURL(data, mime) {\n    var blob = new Blob([data], {type: mime});\n    return window.URL.createObjectURL(blob);\n  }\n\n  /**\n   * Produce a Canvas instance containing a rendered visualization.\n   * This method is asynchronous, returning a Promise instance.\n   * @return {Promise} - A promise that resolves to a Canvas instance.\n   */\n  async function renderToCanvas(scaleFactor, opt) {\n    const r = await renderHeadless(this, vegaScenegraph.RenderType.Canvas, scaleFactor, opt);\n    return r.canvas();\n  }\n\n  /**\n   * Produce a rendered SVG string of the visualization.\n   * This method is asynchronous, returning a Promise instance.\n   * @return {Promise} - A promise that resolves to an SVG string.\n   */\n  async function renderToSVG(scaleFactor) {\n    const r = await renderHeadless(this, vegaScenegraph.RenderType.SVG, scaleFactor);\n    return r.svg();\n  }\n\n  function runtime(view, spec, expr) {\n    return vegaRuntime.context(view, vegaDataflow.transforms, vegaFunctions.functionContext, expr).parse(spec);\n  }\n\n  function scale(name) {\n    var scales = this._runtime.scales;\n    if (!vegaUtil.hasOwnProperty(scales, name)) {\n      vegaUtil.error('Unrecognized scale or projection: ' + name);\n    }\n    return scales[name].value;\n  }\n\n  var Width = 'width',\n      Height = 'height',\n      Padding = 'padding',\n      Skip = {skip: true};\n\n  function viewWidth(view, width) {\n    var a = view.autosize(),\n        p = view.padding();\n    return width - (a && a.contains === Padding ? p.left + p.right : 0);\n  }\n\n  function viewHeight(view, height) {\n    var a = view.autosize(),\n        p = view.padding();\n    return height - (a && a.contains === Padding ? p.top + p.bottom : 0);\n  }\n\n  function initializeResize(view) {\n    var s = view._signals,\n        w = s[Width],\n        h = s[Height],\n        p = s[Padding];\n\n    function resetSize() {\n      view._autosize = view._resize = 1;\n    }\n\n    // respond to width signal\n    view._resizeWidth = view.add(null,\n      _ => {\n        view._width = _.size;\n        view._viewWidth = viewWidth(view, _.size);\n        resetSize();\n      },\n      {size: w}\n    );\n\n    // respond to height signal\n    view._resizeHeight = view.add(null,\n      _ => {\n        view._height = _.size;\n        view._viewHeight = viewHeight(view, _.size);\n        resetSize();\n      },\n      {size: h}\n    );\n\n    // respond to padding signal\n    var resizePadding = view.add(null, resetSize, {pad: p});\n\n    // set rank to run immediately after source signal\n    view._resizeWidth.rank = w.rank + 1;\n    view._resizeHeight.rank = h.rank + 1;\n    resizePadding.rank = p.rank + 1;\n  }\n\n  function resizeView(viewWidth, viewHeight, width, height, origin, auto) {\n    this.runAfter(view => {\n      var rerun = 0;\n\n      // reset autosize flag\n      view._autosize = 0;\n\n      // width value changed: update signal, skip resize op\n      if (view.width() !== width) {\n        rerun = 1;\n        view.signal(Width, width, Skip); // set width, skip update calc\n        view._resizeWidth.skip(true); // skip width resize handler\n      }\n\n      // height value changed: update signal, skip resize op\n      if (view.height() !== height) {\n        rerun = 1;\n        view.signal(Height, height, Skip); // set height, skip update calc\n        view._resizeHeight.skip(true); // skip height resize handler\n      }\n\n      // view width changed: update view property, set resize flag\n      if (view._viewWidth !== viewWidth) {\n        view._resize = 1;\n        view._viewWidth = viewWidth;\n      }\n\n      // view height changed: update view property, set resize flag\n      if (view._viewHeight !== viewHeight) {\n        view._resize = 1;\n        view._viewHeight = viewHeight;\n      }\n\n      // origin changed: update view property, set resize flag\n      if (view._origin[0] !== origin[0] || view._origin[1] !== origin[1]) {\n        view._resize = 1;\n        view._origin = origin;\n      }\n\n      // run dataflow on width/height signal change\n      if (rerun) view.run('enter');\n      if (auto) view.runAfter(v => v.resize());\n    }, false, 1);\n  }\n\n  /**\n   * Get the current view state, consisting of signal values and/or data sets.\n   * @param {object} [options] - Options flags indicating which state to export.\n   *   If unspecified, all signals and data sets will be exported.\n   * @param {function(string, Operator):boolean} [options.signals] - Optional\n   *   predicate function for testing if a signal should be included in the\n   *   exported state. If unspecified, all signals will be included, except for\n   *   those named 'parent' or those which refer to a Transform value.\n   * @param {function(string, object):boolean} [options.data] - Optional\n   *   predicate function for testing if a data set's input should be included\n   *   in the exported state. If unspecified, all data sets that have been\n   *   explicitly modified will be included.\n   * @param {boolean} [options.recurse=true] - Flag indicating if the exported\n   *   state should recursively include state from group mark sub-contexts.\n   * @return {object} - An object containing the exported state values.\n   */\n  function getState(options) {\n    return this._runtime.getState(options || {\n      data:    dataTest,\n      signals: signalTest,\n      recurse: true\n    });\n  }\n\n  function dataTest(name, data) {\n    return data.modified\n        && vegaUtil.isArray(data.input.value)\n        && name.indexOf('_:vega:_');\n  }\n\n  function signalTest(name, op) {\n    return !(name === 'parent' || op instanceof vegaDataflow.transforms.proxy);\n  }\n\n  /**\n   * Sets the current view state and updates the view by invoking run.\n   * @param {object} state - A state object containing signal and/or\n   *   data set values, following the format used by the getState method.\n   * @return {View} - This view instance.\n   */\n  function setState(state) {\n    this.runAsync(null,\n      v => { v._trigger = false; v._runtime.setState(state); },\n      v => { v._trigger = true; }\n    );\n    return this;\n  }\n\n  function timer(callback, delay) {\n    function tick(elapsed) {\n      callback({timestamp: Date.now(), elapsed: elapsed});\n    }\n    this._timers.push(d3Timer.interval(tick, delay));\n  }\n\n  function defaultTooltip(handler, event, item, value) {\n    var el = handler.element();\n    if (el) el.setAttribute('title', formatTooltip(value));\n  }\n\n  function formatTooltip(value) {\n    return value == null ? ''\n      : vegaUtil.isArray(value) ? formatArray(value)\n      : vegaUtil.isObject(value) && !vegaUtil.isDate(value) ? formatObject(value)\n      : value + '';\n  }\n\n  function formatObject(obj) {\n    return Object.keys(obj).map(key => {\n      var v = obj[key];\n      return key + ': ' + (vegaUtil.isArray(v) ? formatArray(v) : formatValue(v));\n    }).join('\\n');\n  }\n\n  function formatArray(value) {\n    return '[' + value.map(formatValue).join(', ') + ']';\n  }\n\n  function formatValue(value) {\n    return vegaUtil.isArray(value) ? '[\\u2026]'\n      : vegaUtil.isObject(value) && !vegaUtil.isDate(value) ? '{\\u2026}'\n      : value;\n  }\n\n  /**\n   * Create a new View instance from a Vega dataflow runtime specification.\n   * The generated View will not immediately be ready for display. Callers\n   * should also invoke the initialize method (e.g., to set the parent\n   * DOM element in browser-based deployment) and then invoke the run\n   * method to evaluate the dataflow graph. Rendering will automatically\n   * be performed upon dataflow runs.\n   * @constructor\n   * @param {object} spec - The Vega dataflow runtime specification.\n   */\n  function View(spec, options) {\n    const view = this;\n    options = options || {};\n\n    vegaDataflow.Dataflow.call(view);\n    if (options.loader) view.loader(options.loader);\n    if (options.logger) view.logger(options.logger);\n    if (options.logLevel != null) view.logLevel(options.logLevel);\n    if (options.locale || spec.locale) {\n      const loc = vegaUtil.extend({}, spec.locale, options.locale);\n      view.locale(vegaFormat.locale(loc.number, loc.time));\n    }\n\n    view._el = null;\n    view._elBind = null;\n    view._renderType = options.renderer || vegaScenegraph.RenderType.Canvas;\n    view._scenegraph = new vegaScenegraph.Scenegraph();\n    const root = view._scenegraph.root;\n\n    // initialize renderer, handler and event management\n    view._renderer = null;\n    view._tooltip = options.tooltip || defaultTooltip,\n    view._redraw = true;\n    view._handler = new vegaScenegraph.CanvasHandler().scene(root);\n    view._globalCursor = false;\n    view._preventDefault = false;\n    view._timers = [];\n    view._eventListeners = [];\n    view._resizeListeners = [];\n\n    // initialize event configuration\n    view._eventConfig = initializeEventConfig(spec.eventConfig);\n    view.globalCursor(view._eventConfig.globalCursor);\n\n    // initialize dataflow graph\n    const ctx = runtime(view, spec, options.expr);\n    view._runtime = ctx;\n    view._signals = ctx.signals;\n    view._bind = (spec.bindings || []).map(_ => ({\n      state: null,\n      param: vegaUtil.extend({}, _)\n    }));\n\n    // initialize scenegraph\n    if (ctx.root) ctx.root.set(root);\n    root.source = ctx.data.root.input;\n    view.pulse(\n      ctx.data.root.input,\n      view.changeset().insert(root.items)\n    );\n\n    // initialize view size\n    view._width = view.width();\n    view._height = view.height();\n    view._viewWidth = viewWidth(view, view._width);\n    view._viewHeight = viewHeight(view, view._height);\n    view._origin = [0, 0];\n    view._resize = 0;\n    view._autosize = 1;\n    initializeResize(view);\n\n    // initialize background color\n    background(view);\n\n    // initialize cursor\n    cursor(view);\n\n    // initialize view description\n    view.description(spec.description);\n\n    // initialize hover proessing, if requested\n    if (options.hover) view.hover();\n\n    // initialize DOM container(s) and renderer\n    if (options.container) view.initialize(options.container, options.bind);\n  }\n\n  function lookupSignal(view, name) {\n    return vegaUtil.hasOwnProperty(view._signals, name)\n      ? view._signals[name]\n      : vegaUtil.error('Unrecognized signal name: ' + vegaUtil.stringValue(name));\n  }\n\n  function findOperatorHandler(op, handler) {\n    const h = (op._targets || [])\n      .filter(op => op._update && op._update.handler === handler);\n    return h.length ? h[0] : null;\n  }\n\n  function addOperatorListener(view, name, op, handler) {\n    var h = findOperatorHandler(op, handler);\n    if (!h) {\n      h = trap(view, () => handler(name, op.value));\n      h.handler = handler;\n      view.on(op, null, h);\n    }\n    return view;\n  }\n\n  function removeOperatorListener(view, op, handler) {\n    var h = findOperatorHandler(op, handler);\n    if (h) op._targets.remove(h);\n    return view;\n  }\n\n  vegaUtil.inherits(View, vegaDataflow.Dataflow, {\n    // -- DATAFLOW / RENDERING ----\n\n    async evaluate(encode, prerun, postrun) {\n      // evaluate dataflow and prerun\n      await vegaDataflow.Dataflow.prototype.evaluate.call(this, encode, prerun);\n\n      // render as needed\n      if (this._redraw || this._resize) {\n        try {\n          if (this._renderer) {\n            if (this._resize) {\n              this._resize = 0;\n              resizeRenderer(this);\n            }\n            await this._renderer.renderAsync(this._scenegraph.root);\n          }\n          this._redraw = false;\n        } catch (e) {\n          this.error(e);\n        }\n      }\n\n      // evaluate postrun\n      if (postrun) vegaDataflow.asyncCallback(this, postrun);\n\n      return this;\n    },\n\n    dirty(item) {\n      this._redraw = true;\n      this._renderer && this._renderer.dirty(item);\n    },\n\n    // -- GET / SET ----\n\n    description(text) {\n      if (arguments.length) {\n        const desc = text != null ? (text + '') : null;\n        if (desc !== this._desc) ariaLabel(this._el, this._desc = desc);\n        return this;\n      }\n      return this._desc;\n    },\n\n    container() {\n      return this._el;\n    },\n\n    scenegraph() {\n      return this._scenegraph;\n    },\n\n    origin() {\n      return this._origin.slice();\n    },\n\n    signal(name, value, options) {\n      var op = lookupSignal(this, name);\n      return arguments.length === 1\n        ? op.value\n        : this.update(op, value, options);\n    },\n\n    width(_) {\n      return arguments.length ? this.signal('width', _) : this.signal('width');\n    },\n\n    height(_) {\n      return arguments.length ? this.signal('height', _) : this.signal('height');\n    },\n\n    padding(_) {\n      return arguments.length\n        ? this.signal('padding', padding(_))\n        : padding(this.signal('padding'));\n    },\n\n    autosize(_) {\n      return arguments.length ? this.signal('autosize', _) : this.signal('autosize');\n    },\n\n    background(_) {\n      return arguments.length ? this.signal('background', _) : this.signal('background');\n    },\n\n    renderer(type) {\n      if (!arguments.length) return this._renderType;\n      if (!vegaScenegraph.renderModule(type)) vegaUtil.error('Unrecognized renderer type: ' + type);\n      if (type !== this._renderType) {\n        this._renderType = type;\n        this._resetRenderer();\n      }\n      return this;\n    },\n\n    tooltip(handler) {\n      if (!arguments.length) return this._tooltip;\n      if (handler !== this._tooltip) {\n        this._tooltip = handler;\n        this._resetRenderer();\n      }\n      return this;\n    },\n\n    loader(loader) {\n      if (!arguments.length) return this._loader;\n      if (loader !== this._loader) {\n        vegaDataflow.Dataflow.prototype.loader.call(this, loader);\n        this._resetRenderer();\n      }\n      return this;\n    },\n\n    resize() {\n      // set flag to perform autosize\n      this._autosize = 1;\n      // touch autosize signal to ensure top-level ViewLayout runs\n      return this.touch(lookupSignal(this, 'autosize'));\n    },\n\n    _resetRenderer() {\n      if (this._renderer) {\n        this._renderer = null;\n        this.initialize(this._el, this._elBind);\n      }\n    },\n\n    // -- SIZING ----\n    _resizeView: resizeView,\n\n    // -- EVENT HANDLING ----\n\n    addEventListener(type, handler, options) {\n      var callback = handler;\n      if (!(options && options.trap === false)) {\n        // wrap callback in error handler\n        callback = trap(this, handler);\n        callback.raw = handler;\n      }\n      this._handler.on(type, callback);\n      return this;\n    },\n\n    removeEventListener(type, handler) {\n      var handlers = this._handler.handlers(type),\n          i = handlers.length, h, t;\n\n      // search registered handlers, remove if match found\n      while (--i >= 0) {\n        t = handlers[i].type;\n        h = handlers[i].handler;\n        if (type === t && (handler === h || handler === h.raw)) {\n          this._handler.off(t, h);\n          break;\n        }\n      }\n      return this;\n    },\n\n    addResizeListener(handler) {\n      var l = this._resizeListeners;\n      if (l.indexOf(handler) < 0) {\n        // add handler if it isn't already registered\n        // note: error trapping handled elsewhere, so\n        // no need to wrap handlers here\n        l.push(handler);\n      }\n      return this;\n    },\n\n    removeResizeListener(handler) {\n      var l = this._resizeListeners,\n          i = l.indexOf(handler);\n      if (i >= 0) {\n        l.splice(i, 1);\n      }\n      return this;\n    },\n\n    addSignalListener(name, handler) {\n      return addOperatorListener(this, name, lookupSignal(this, name), handler);\n    },\n\n    removeSignalListener(name, handler) {\n      return removeOperatorListener(this, lookupSignal(this, name), handler);\n    },\n\n    addDataListener(name, handler) {\n      return addOperatorListener(this, name, dataref(this, name).values, handler);\n    },\n\n    removeDataListener(name, handler) {\n      return removeOperatorListener(this, dataref(this, name).values, handler);\n    },\n\n    globalCursor(_) {\n      if (arguments.length) {\n        if (this._globalCursor !== !!_) {\n          const prev = setCursor(this, null); // clear previous cursor\n          this._globalCursor = !!_;\n          if (prev) setCursor(this, prev); // swap cursor\n        }\n        return this;\n      } else {\n        return this._globalCursor;\n      }\n    },\n\n    preventDefault(_) {\n      if (arguments.length) {\n        this._preventDefault = _;\n        return this;\n      } else {\n        return this._preventDefault;\n      }\n    },\n\n    timer,\n    events,\n    finalize,\n    hover,\n\n    // -- DATA ----\n    data,\n    change,\n    insert,\n    remove,\n\n    // -- SCALES --\n    scale,\n\n    // -- INITIALIZATION ----\n    initialize,\n\n    // -- HEADLESS RENDERING ----\n    toImageURL: renderToImageURL,\n    toCanvas: renderToCanvas,\n    toSVG: renderToSVG,\n\n    // -- SAVE / RESTORE STATE ----\n    getState,\n    setState\n  });\n\n  exports.View = View;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$vega_dataflow$build$vega_dataflow","~$shadow.js","~$module$node_modules$vega_scenegraph$build$vega_scenegraph","~$module$node_modules$vega_format$build$vega_format","~$module$node_modules$vega_util$build$vega_util","~$module$node_modules$d3_timer$dist$d3_timer","~$module$node_modules$d3_array$dist$d3_array","~$module$node_modules$vega_functions$build$vega_functions","~$module$node_modules$vega_runtime$build$vega_runtime"]],"~:properties",["^5",["skip","sources","View","recurse","_resizeHeight","selected","_elBind","min","handler","_autosize","width","dataflow","renderer","origin","right","pad","top","_viewHeight","_runtime","_viewWidth","height","innerHTML","_preventDefault","scale","elapsed","_timers","removeEventListener","removeSignalListener","group","autosize","tooltip","removeDataListener","textContent","x","user","__esModule","max","padding","dirty","_resizeView","timestamp","_origin","vega","rank","update","addResizeListener","_signals","setState","_width","signal","addDataListener","element","loader","preventDefault","_renderType","name","getState","signals","value","addSignalListener","toSVG","evaluate","xy","globalCursor","_resizeWidth","param","cursor","_resize","item","remove","_el","_eventConfig","_height","_tooltip","events","_handler","_resizeListeners","source","type","_globalCursor","_bind","initialize","y","toImageURL","state","_desc","modified","_renderer","_scenegraph","insert","selectedIndex","_trigger","bottom","set","toCanvas","bg","resize","size","_background","active","hover","raw","trap","addEventListener","removeResizeListener","_eventListeners","data","background","view","checked","_redraw","scenegraph","defaults","elements","left","description","container","change","_resetRenderer","timer","finalize","step"]],"~:compiled-at",1600144480031,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$vega_view$build$vega_view.js\",\n\"lineCount\":49,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/vega-view/build/vega-view.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$vega_view$build$vega_view\\\"] = function(global,require,module,exports) {\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-dataflow'), require('vega-scenegraph'), require('d3-array'), require('vega-functions'), require('vega-runtime'), require('d3-timer'), require('vega-format')) :\\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-dataflow', 'vega-scenegraph', 'd3-array', 'vega-functions', 'vega-runtime', 'd3-timer', 'vega-format'], factory) :\\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.vega, global.d3, global.vega, global.vega, global.d3, global.vega));\\n}(this, (function (exports, vegaUtil, vegaDataflow, vegaScenegraph, d3Array, vegaFunctions, vegaRuntime, d3Timer, vegaFormat) { 'use strict';\\n\\n  // initialize aria role and label attributes\\n  function initializeAria(view) {\\n    const el = view.container();\\n    if (el) {\\n      el.setAttribute('role', 'graphics-document');\\n      el.setAttribute('aria-roleDescription', 'visualization');\\n      ariaLabel(el, view.description());\\n    }\\n  }\\n\\n  // update aria-label if we have a DOM container element\\n  function ariaLabel(el, desc) {\\n    if (el) desc == null\\n      ? el.removeAttribute('aria-label')\\n      : el.setAttribute('aria-label', desc);\\n  }\\n\\n  function background(view) {\\n    // respond to background signal\\n    view.add(null, _ => {\\n      view._background = _.bg;\\n      view._resize = 1;\\n      return _.bg;\\n    }, { bg: view._signals.background });\\n  }\\n\\n  const Default = 'default';\\n\\n  function cursor(view) {\\n    // get cursor signal, add to dataflow if needed\\n    const cursor = view._signals.cursor || (view._signals.cursor = view.add({\\n      user: Default,\\n      item: null\\n    }));\\n\\n    // evaluate cursor on each mousemove event\\n    view.on(view.events('view', 'mousemove'), cursor,\\n      (_, event) => {\\n        const value = cursor.value,\\n              user = value ? (vegaUtil.isString(value) ? value : value.user) : Default,\\n              item = event.item && event.item.cursor || null;\\n\\n        return (value && user === value.user && item == value.item)\\n          ? value\\n          : {user: user, item: item};\\n      }\\n    );\\n\\n    // when cursor signal updates, set visible cursor\\n    view.add(null, function(_) {\\n      let user = _.cursor,\\n          item = this.value;\\n\\n      if (!vegaUtil.isString(user)) {\\n        item = user.item;\\n        user = user.user;\\n      }\\n\\n      setCursor(view, user && user !== Default ? user : (item || user));\\n\\n      return item;\\n    }, {cursor: cursor});\\n  }\\n\\n  function setCursor(view, cursor) {\\n    const el = view.globalCursor()\\n      ? (typeof document !== 'undefined' && document.body)\\n      : view.container();\\n\\n    if (el) {\\n      return cursor == null\\n        ? el.style.removeProperty('cursor')\\n        : (el.style.cursor = cursor);\\n    }\\n  }\\n\\n  function dataref(view, name) {\\n    var data = view._runtime.data;\\n    if (!vegaUtil.hasOwnProperty(data, name)) {\\n      vegaUtil.error('Unrecognized data set: ' + name);\\n    }\\n    return data[name];\\n  }\\n\\n  function data(name, values) {\\n    return arguments.length < 2\\n      ? dataref(this, name).values.value\\n      : change.call(this, name, vegaDataflow.changeset().remove(vegaUtil.truthy).insert(values));\\n  }\\n\\n  function change(name, changes) {\\n    if (!vegaDataflow.isChangeSet(changes)) {\\n      vegaUtil.error('Second argument to changes must be a changeset.');\\n    }\\n    var dataset = dataref(this, name);\\n    dataset.modified = true;\\n    return this.pulse(dataset.input, changes);\\n  }\\n\\n  function insert(name, _) {\\n    return change.call(this, name, vegaDataflow.changeset().insert(_));\\n  }\\n\\n  function remove(name, _) {\\n    return change.call(this, name, vegaDataflow.changeset().remove(_));\\n  }\\n\\n  function width(view) {\\n    var padding = view.padding();\\n    return Math.max(0, view._viewWidth + padding.left + padding.right);\\n  }\\n\\n  function height(view) {\\n    var padding = view.padding();\\n    return Math.max(0, view._viewHeight + padding.top + padding.bottom);\\n  }\\n\\n  function offset(view) {\\n    var padding = view.padding(),\\n        origin = view._origin;\\n    return [\\n      padding.left + origin[0],\\n      padding.top + origin[1]\\n    ];\\n  }\\n\\n  function resizeRenderer(view) {\\n    var origin = offset(view),\\n        w = width(view),\\n        h = height(view);\\n\\n    view._renderer.background(view.background());\\n    view._renderer.resize(w, h, origin);\\n    view._handler.origin(origin);\\n\\n    view._resizeListeners.forEach(handler => {\\n      try {\\n        handler(w, h);\\n      } catch (error) {\\n        view.error(error);\\n      }\\n    });\\n  }\\n\\n  /**\\n   * Extend an event with additional view-specific methods.\\n   * Adds a new property ('vega') to an event that provides a number\\n   * of methods for querying information about the current interaction.\\n   * The vega object provides the following methods:\\n   *   view - Returns the backing View instance.\\n   *   item - Returns the currently active scenegraph item (if any).\\n   *   group - Returns the currently active scenegraph group (if any).\\n   *     This method accepts a single string-typed argument indicating the name\\n   *     of the desired parent group. The scenegraph will be traversed from\\n   *     the item up towards the root to search for a matching group. If no\\n   *     argument is provided the enclosing group for the active item is\\n   *     returned, unless the item it itself a group, in which case it is\\n   *     returned directly.\\n   *   xy - Returns a two-element array containing the x and y coordinates for\\n   *     mouse or touch events. For touch events, this is based on the first\\n   *     elements in the changedTouches array. This method accepts a single\\n   *     argument: either an item instance or mark name that should serve as\\n   *     the reference coordinate system. If no argument is provided the\\n   *     top-level view coordinate system is assumed.\\n   *   x - Returns the current x-coordinate, accepts the same arguments as xy.\\n   *   y - Returns the current y-coordinate, accepts the same arguments as xy.\\n   * @param {Event} event - The input event to extend.\\n   * @param {Item} item - The currently active scenegraph item (if any).\\n   * @return {Event} - The extended input event.\\n   */\\n  function eventExtend(view, event, item) {\\n    var r  = view._renderer,\\n        el = r && r.canvas(),\\n        p, e, translate;\\n\\n    if (el) {\\n      translate = offset(view);\\n      e = event.changedTouches ? event.changedTouches[0] : event;\\n      p = vegaScenegraph.point(e, el);\\n      p[0] -= translate[0];\\n      p[1] -= translate[1];\\n    }\\n\\n    event.dataflow = view;\\n    event.item = item;\\n    event.vega = extension(view, item, p);\\n    return event;\\n  }\\n\\n  function extension(view, item, point) {\\n    var itemGroup = item\\n      ? item.mark.marktype === 'group' ? item : item.mark.group\\n      : null;\\n\\n    function group(name) {\\n      var g = itemGroup, i;\\n      if (name) for (i = item; i; i = i.mark.group) {\\n        if (i.mark.name === name) { g = i; break; }\\n      }\\n      return g && g.mark && g.mark.interactive ? g : {};\\n    }\\n\\n    function xy(item) {\\n      if (!item) return point;\\n      if (vegaUtil.isString(item)) item = group(item);\\n\\n      var p = point.slice();\\n      while (item) {\\n        p[0] -= item.x || 0;\\n        p[1] -= item.y || 0;\\n        item = item.mark && item.mark.group;\\n      }\\n      return p;\\n    }\\n\\n    return {\\n      view:  vegaUtil.constant(view),\\n      item:  vegaUtil.constant(item || {}),\\n      group: group,\\n      xy:    xy,\\n      x:     function(item) { return xy(item)[0]; },\\n      y:     function(item) { return xy(item)[1]; }\\n    };\\n  }\\n\\n  const VIEW = 'view',\\n        TIMER = 'timer',\\n        WINDOW = 'window',\\n        NO_TRAP = {trap: false};\\n\\n  /**\\n   * Initialize event handling configuration.\\n   * @param {object} config - The configuration settings.\\n   * @return {object}\\n   */\\n  function initializeEventConfig(config) {\\n    const events = vegaUtil.extend({defaults: {}}, config);\\n\\n    const unpack = (obj, keys) => {\\n      keys.forEach(k => {\\n        if (vegaUtil.isArray(obj[k])) obj[k] = vegaUtil.toSet(obj[k]);\\n      });\\n    };\\n\\n    unpack(events.defaults, ['prevent', 'allow']);\\n    unpack(events, ['view', 'window', 'selector']);\\n\\n    return events;\\n  }\\n\\n  function prevent(view, type) {\\n    var def = view._eventConfig.defaults,\\n        prevent = def.prevent,\\n        allow = def.allow;\\n\\n    return prevent === false || allow === true ? false\\n      : prevent === true || allow === false ? true\\n      : prevent ? prevent[type]\\n      : allow ? !allow[type]\\n      : view.preventDefault();\\n  }\\n\\n  function permit(view, key, type) {\\n    const rule = view._eventConfig && view._eventConfig[key];\\n\\n    if (rule === false || (vegaUtil.isObject(rule) && !rule[type])) {\\n      view.warn(`Blocked ${key} ${type} event listener.`);\\n      return false;\\n    }\\n\\n    return true;\\n  }\\n\\n  /**\\n   * Create a new event stream from an event source.\\n   * @param {object} source - The event source to monitor.\\n   * @param {string} type - The event type.\\n   * @param {function(object): boolean} [filter] - Event filter function.\\n   * @return {EventStream}\\n   */\\n  function events(source, type, filter) {\\n    var view = this,\\n        s = new vegaDataflow.EventStream(filter),\\n        send = function(e, item) {\\n          view.runAsync(null, () => {\\n            if (source === VIEW && prevent(view, type)) {\\n              e.preventDefault();\\n            }\\n            s.receive(eventExtend(view, e, item));\\n          });\\n        },\\n        sources;\\n\\n    if (source === TIMER) {\\n      if (permit(view, 'timer', type)) {\\n        view.timer(send, type);\\n      }\\n    }\\n\\n    else if (source === VIEW) {\\n      if (permit(view, 'view', type)) {\\n        // send traps errors, so use {trap: false} option\\n        view.addEventListener(type, send, NO_TRAP);\\n      }\\n    }\\n\\n    else {\\n      if (source === WINDOW) {\\n        if (permit(view, 'window', type) && typeof window !== 'undefined') {\\n          sources = [window];\\n        }\\n      } else if (typeof document !== 'undefined') {\\n        if (permit(view, 'selector', type)) {\\n          sources = document.querySelectorAll(source);\\n        }\\n      }\\n\\n      if (!sources) {\\n        view.warn('Can not resolve event source: ' + source);\\n      } else {\\n        for (var i=0, n=sources.length; i<n; ++i) {\\n          sources[i].addEventListener(type, send);\\n        }\\n\\n        view._eventListeners.push({\\n          type:    type,\\n          sources: sources,\\n          handler: send\\n        });\\n      }\\n    }\\n\\n    return s;\\n  }\\n\\n  function itemFilter(event) {\\n    return event.item;\\n  }\\n\\n  function markTarget(event) {\\n    // grab upstream collector feeding the mark operator\\n    return event.item.mark.source;\\n  }\\n\\n  function invoke(name) {\\n    return function(_, event) {\\n      return event.vega.view()\\n        .changeset()\\n        .encode(event.item, name);\\n    };\\n  }\\n\\n  function hover(hoverSet, leaveSet) {\\n    hoverSet = [hoverSet || 'hover'];\\n    leaveSet = [leaveSet || 'update', hoverSet[0]];\\n\\n    // invoke hover set upon mouseover\\n    this.on(\\n      this.events('view', 'mouseover', itemFilter),\\n      markTarget,\\n      invoke(hoverSet)\\n    );\\n\\n    // invoke leave set upon mouseout\\n    this.on(\\n      this.events('view', 'mouseout', itemFilter),\\n      markTarget,\\n      invoke(leaveSet)\\n    );\\n\\n    return this;\\n  }\\n\\n  /**\\n   * Finalize a View instance that is being removed.\\n   * Cancel any running timers.\\n   * Remove all external event listeners.\\n   * Remove any currently displayed tooltip.\\n   */\\n  function finalize() {\\n    var tooltip = this._tooltip,\\n        timers = this._timers,\\n        listeners = this._eventListeners,\\n        n, m, e;\\n\\n    n = timers.length;\\n    while (--n >= 0) {\\n      timers[n].stop();\\n    }\\n\\n    n = listeners.length;\\n    while (--n >= 0) {\\n      e = listeners[n];\\n      m = e.sources.length;\\n      while (--m >= 0) {\\n        e.sources[m].removeEventListener(e.type, e.handler);\\n      }\\n    }\\n\\n    if (tooltip) {\\n      tooltip.call(this, this._handler, null, null, null);\\n    }\\n\\n    return this;\\n  }\\n\\n  function element(tag, attr, text) {\\n    var el = document.createElement(tag);\\n    for (var key in attr) el.setAttribute(key, attr[key]);\\n    if (text != null) el.textContent = text;\\n    return el;\\n  }\\n\\n  const BindClass = 'vega-bind',\\n        NameClass = 'vega-bind-name',\\n        RadioClass = 'vega-bind-radio';\\n\\n  /**\\n   * Bind a signal to an external HTML input element. The resulting two-way\\n   * binding will propagate input changes to signals, and propagate signal\\n   * changes to the input element state. If this view instance has no parent\\n   * element, we assume the view is headless and no bindings are created.\\n   * @param {Element|string} el - The parent DOM element to which the input\\n   *   element should be appended as a child. If string-valued, this argument\\n   *   will be treated as a CSS selector. If null or undefined, the parent\\n   *   element of this view will be used as the element.\\n   * @param {object} param - The binding parameters which specify the signal\\n   *   to bind to, the input element type, and type-specific configuration.\\n   * @return {View} - This view instance.\\n   */\\n  function bind(view, el, binding) {\\n    if (!el) return;\\n\\n    const param = binding.param;\\n    let bind = binding.state;\\n\\n    if (!bind) {\\n      bind = binding.state = {\\n        elements: null,\\n        active: false,\\n        set: null,\\n        update: value => {\\n          if (value !== view.signal(param.signal)) {\\n            view.runAsync(null, () => {\\n              bind.source = true;\\n              view.signal(param.signal, value);\\n            });\\n          }\\n        }\\n      };\\n      if (param.debounce) {\\n        bind.update = vegaUtil.debounce(param.debounce, bind.update);\\n      }\\n    }\\n\\n    generate(bind, el, param, view.signal(param.signal));\\n\\n    if (!bind.active) {\\n      view.on(view._signals[param.signal], null, () => {\\n        bind.source\\n          ? (bind.source = false)\\n          : bind.set(view.signal(param.signal));\\n      });\\n      bind.active = true;\\n    }\\n\\n    return bind;\\n  }\\n\\n  /**\\n   * Generate an HTML input form element and bind it to a signal.\\n   */\\n  function generate(bind, el, param, value) {\\n    const div = element('div', {'class': BindClass});\\n\\n    const wrapper = param.input === 'radio'\\n      ? div\\n      : div.appendChild(element('label'));\\n\\n    wrapper.appendChild(element('span',\\n      {'class': NameClass},\\n      (param.name || param.signal)\\n    ));\\n\\n    el.appendChild(div);\\n\\n    let input = form;\\n    switch (param.input) {\\n      case 'checkbox': input = checkbox; break;\\n      case 'select':   input = select; break;\\n      case 'radio':    input = radio; break;\\n      case 'range':    input = range; break;\\n    }\\n\\n    input(bind, wrapper, param, value);\\n  }\\n\\n  /**\\n   * Generates an arbitrary input form element.\\n   * The input type is controlled via user-provided parameters.\\n   */\\n  function form(bind, el, param, value) {\\n    const node = element('input');\\n\\n    for (const key in param) {\\n      if (key !== 'signal' && key !== 'element') {\\n        node.setAttribute(key === 'input' ? 'type' : key, param[key]);\\n      }\\n    }\\n    node.setAttribute('name', param.signal);\\n    node.value = value;\\n\\n    el.appendChild(node);\\n    node.addEventListener('input', () => bind.update(node.value));\\n\\n    bind.elements = [node];\\n    bind.set = value => node.value = value;\\n  }\\n\\n  /**\\n   * Generates a checkbox input element.\\n   */\\n  function checkbox(bind, el, param, value) {\\n    const attr = {type: 'checkbox', name: param.signal};\\n    if (value) attr.checked = true;\\n    const node = element('input', attr);\\n\\n    el.appendChild(node);\\n    node.addEventListener('change', () => bind.update(node.checked));\\n\\n    bind.elements = [node];\\n    bind.set = value => node.checked = !!value || null;\\n  }\\n\\n  /**\\n   * Generates a selection list input element.\\n   */\\n  function select(bind, el, param, value) {\\n    const node = element('select', {name: param.signal}),\\n          labels = param.labels || [];\\n\\n    param.options.forEach((option, i) => {\\n      const attr = {value: option};\\n      if (valuesEqual(option, value)) attr.selected = true;\\n      node.appendChild(element('option', attr, (labels[i] || option)+''));\\n    });\\n\\n    el.appendChild(node);\\n\\n    node.addEventListener('change', () => {\\n      bind.update(param.options[node.selectedIndex]);\\n    });\\n\\n    bind.elements = [node];\\n    bind.set = value => {\\n      for (let i = 0, n = param.options.length; i < n; ++i) {\\n        if (valuesEqual(param.options[i], value)) {\\n          node.selectedIndex = i; return;\\n        }\\n      }\\n    };\\n  }\\n\\n  /**\\n   * Generates a radio button group.\\n   */\\n  function radio(bind, el, param, value) {\\n    const group = element('span', {'class': RadioClass}),\\n          labels = param.labels || [];\\n\\n    el.appendChild(group);\\n\\n    bind.elements = param.options.map((option, i) => {\\n      const attr = {\\n        type:  'radio',\\n        name:  param.signal,\\n        value: option\\n      };\\n      if (valuesEqual(option, value)) attr.checked = true;\\n\\n      const input = element('input', attr);\\n      input.addEventListener('change', () => bind.update(option));\\n\\n      const label = element('label', {}, (labels[i] || option)+'');\\n      label.prepend(input);\\n      group.appendChild(label);\\n\\n      return input;\\n    });\\n\\n    bind.set = value => {\\n      const nodes = bind.elements,\\n            n = nodes.length;\\n      for (let i = 0; i < n; ++i) {\\n        if (valuesEqual(nodes[i].value, value)) nodes[i].checked = true;\\n      }\\n    };\\n  }\\n\\n  /**\\n   * Generates a slider input element.\\n   */\\n  function range(bind, el, param, value) {\\n    value = value !== undefined ? value : ((+param.max) + (+param.min)) / 2;\\n\\n    const max = param.max != null ? param.max : Math.max(100, +value) || 100,\\n          min = param.min || Math.min(0, max, +value) || 0,\\n          step = param.step || d3Array.tickStep(min, max, 100);\\n\\n    const node = element('input', {\\n      type:  'range',\\n      name:  param.signal,\\n      min:   min,\\n      max:   max,\\n      step:  step\\n    });\\n    node.value = value;\\n\\n    const span = element('span', {}, +value);\\n\\n    el.appendChild(node);\\n    el.appendChild(span);\\n\\n    const update = () => {\\n      span.textContent = node.value;\\n      bind.update(+node.value);\\n    };\\n\\n    // subscribe to both input and change\\n    node.addEventListener('input', update);\\n    node.addEventListener('change', update);\\n\\n    bind.elements = [node];\\n    bind.set = value => {\\n      node.value = value;\\n      span.textContent = value;\\n    };\\n  }\\n\\n  function valuesEqual(a, b) {\\n    return a === b || (a+'' === b+'');\\n  }\\n\\n  function initializeRenderer(view, r, el, constructor, scaleFactor, opt) {\\n    r = r || new constructor(view.loader());\\n    return r\\n      .initialize(el, width(view), height(view), offset(view), scaleFactor, opt)\\n      .background(view.background());\\n  }\\n\\n  function trap(view, fn) {\\n    return !fn ? null : function() {\\n      try {\\n        fn.apply(this, arguments);\\n      } catch (error) {\\n        view.error(error);\\n      }\\n    };\\n  }\\n\\n  function initializeHandler(view, prevHandler, el, constructor) {\\n    // instantiate scenegraph handler\\n    var handler = new constructor(view.loader(), trap(view, view.tooltip()))\\n      .scene(view.scenegraph().root)\\n      .initialize(el, offset(view), view);\\n\\n    // transfer event handlers\\n    if (prevHandler) {\\n      prevHandler.handlers().forEach(h => {\\n        handler.on(h.type, h.handler);\\n      });\\n    }\\n\\n    return handler;\\n  }\\n\\n  function initialize(el, elBind) {\\n    const view = this,\\n          type = view._renderType,\\n          config = view._eventConfig.bind,\\n          module = vegaScenegraph.renderModule(type);\\n\\n    // containing dom element\\n    el = view._el = el ? lookup(view, el) : null;\\n\\n    // initialize aria attributes\\n    initializeAria(view);\\n\\n    // select appropriate renderer & handler\\n    if (!module) view.error('Unrecognized renderer type: ' + type);\\n    const Handler = module.handler || vegaScenegraph.CanvasHandler,\\n          Renderer = (el ? module.renderer : module.headless);\\n\\n    // initialize renderer and input handler\\n    view._renderer = !Renderer ? null\\n      : initializeRenderer(view, view._renderer, el, Renderer);\\n    view._handler = initializeHandler(view, view._handler, el, Handler);\\n    view._redraw = true;\\n\\n    // initialize signal bindings\\n    if (el && config !== 'none') {\\n      elBind = elBind ? (view._elBind = lookup(view, elBind))\\n        : el.appendChild(element('form', {'class': 'vega-bindings'}));\\n\\n      view._bind.forEach(_ => {\\n        if (_.param.element && config !== 'container') {\\n          _.element = lookup(view, _.param.element);\\n        }\\n      });\\n\\n      view._bind.forEach(_ => {\\n        bind(view, _.element || elBind, _);\\n      });\\n    }\\n\\n    return view;\\n  }\\n\\n  function lookup(view, el) {\\n    if (typeof el === 'string') {\\n      if (typeof document !== 'undefined') {\\n        el = document.querySelector(el);\\n        if (!el) {\\n          view.error('Signal bind element not found: ' + el);\\n          return null;\\n        }\\n      } else {\\n        view.error('DOM document instance not found.');\\n        return null;\\n      }\\n    }\\n    if (el) {\\n      try {\\n        el.innerHTML = '';\\n      } catch (e) {\\n        el = null;\\n        view.error(e);\\n      }\\n    }\\n    return el;\\n  }\\n\\n  const number = _ => +_ || 0;\\n\\n  const paddingObject = _ => ({top: _, bottom: _, left: _, right: _});\\n\\n  function padding(_) {\\n    return vegaUtil.isObject(_)\\n      ? {\\n          top:    number(_.top),\\n          bottom: number(_.bottom),\\n          left:   number(_.left),\\n          right:  number(_.right)\\n        }\\n      : paddingObject(number(_));\\n  }\\n\\n  /**\\n   * Render the current scene in a headless fashion.\\n   * This method is asynchronous, returning a Promise instance.\\n   * @return {Promise} - A Promise that resolves to a renderer.\\n   */\\n  async function renderHeadless(view, type, scaleFactor, opt) {\\n    const module = vegaScenegraph.renderModule(type),\\n          ctr = module && module.headless;\\n\\n    if (!ctr) vegaUtil.error('Unrecognized renderer type: ' + type);\\n\\n    await view.runAsync();\\n    return initializeRenderer(view, null, null, ctr, scaleFactor, opt)\\n      .renderAsync(view._scenegraph.root);\\n  }\\n\\n  /**\\n   * Produce an image URL for the visualization. Depending on the type\\n   * parameter, the generated URL contains data for either a PNG or SVG image.\\n   * The URL can be used (for example) to download images of the visualization.\\n   * This method is asynchronous, returning a Promise instance.\\n   * @param {string} type - The image type. One of 'svg', 'png' or 'canvas'.\\n   *   The 'canvas' and 'png' types are synonyms for a PNG image.\\n   * @return {Promise} - A promise that resolves to an image URL.\\n   */\\n  async function renderToImageURL(type, scaleFactor) {\\n    if (type !== vegaScenegraph.RenderType.Canvas && type !== vegaScenegraph.RenderType.SVG && type !== vegaScenegraph.RenderType.PNG) {\\n      vegaUtil.error('Unrecognized image type: ' + type);\\n    }\\n\\n    const r = await renderHeadless(this, type, scaleFactor);\\n    return type === vegaScenegraph.RenderType.SVG\\n      ? toBlobURL(r.svg(), 'image/svg+xml')\\n      : r.canvas().toDataURL('image/png');\\n  }\\n\\n  function toBlobURL(data, mime) {\\n    var blob = new Blob([data], {type: mime});\\n    return window.URL.createObjectURL(blob);\\n  }\\n\\n  /**\\n   * Produce a Canvas instance containing a rendered visualization.\\n   * This method is asynchronous, returning a Promise instance.\\n   * @return {Promise} - A promise that resolves to a Canvas instance.\\n   */\\n  async function renderToCanvas(scaleFactor, opt) {\\n    const r = await renderHeadless(this, vegaScenegraph.RenderType.Canvas, scaleFactor, opt);\\n    return r.canvas();\\n  }\\n\\n  /**\\n   * Produce a rendered SVG string of the visualization.\\n   * This method is asynchronous, returning a Promise instance.\\n   * @return {Promise} - A promise that resolves to an SVG string.\\n   */\\n  async function renderToSVG(scaleFactor) {\\n    const r = await renderHeadless(this, vegaScenegraph.RenderType.SVG, scaleFactor);\\n    return r.svg();\\n  }\\n\\n  function runtime(view, spec, expr) {\\n    return vegaRuntime.context(view, vegaDataflow.transforms, vegaFunctions.functionContext, expr).parse(spec);\\n  }\\n\\n  function scale(name) {\\n    var scales = this._runtime.scales;\\n    if (!vegaUtil.hasOwnProperty(scales, name)) {\\n      vegaUtil.error('Unrecognized scale or projection: ' + name);\\n    }\\n    return scales[name].value;\\n  }\\n\\n  var Width = 'width',\\n      Height = 'height',\\n      Padding = 'padding',\\n      Skip = {skip: true};\\n\\n  function viewWidth(view, width) {\\n    var a = view.autosize(),\\n        p = view.padding();\\n    return width - (a && a.contains === Padding ? p.left + p.right : 0);\\n  }\\n\\n  function viewHeight(view, height) {\\n    var a = view.autosize(),\\n        p = view.padding();\\n    return height - (a && a.contains === Padding ? p.top + p.bottom : 0);\\n  }\\n\\n  function initializeResize(view) {\\n    var s = view._signals,\\n        w = s[Width],\\n        h = s[Height],\\n        p = s[Padding];\\n\\n    function resetSize() {\\n      view._autosize = view._resize = 1;\\n    }\\n\\n    // respond to width signal\\n    view._resizeWidth = view.add(null,\\n      _ => {\\n        view._width = _.size;\\n        view._viewWidth = viewWidth(view, _.size);\\n        resetSize();\\n      },\\n      {size: w}\\n    );\\n\\n    // respond to height signal\\n    view._resizeHeight = view.add(null,\\n      _ => {\\n        view._height = _.size;\\n        view._viewHeight = viewHeight(view, _.size);\\n        resetSize();\\n      },\\n      {size: h}\\n    );\\n\\n    // respond to padding signal\\n    var resizePadding = view.add(null, resetSize, {pad: p});\\n\\n    // set rank to run immediately after source signal\\n    view._resizeWidth.rank = w.rank + 1;\\n    view._resizeHeight.rank = h.rank + 1;\\n    resizePadding.rank = p.rank + 1;\\n  }\\n\\n  function resizeView(viewWidth, viewHeight, width, height, origin, auto) {\\n    this.runAfter(view => {\\n      var rerun = 0;\\n\\n      // reset autosize flag\\n      view._autosize = 0;\\n\\n      // width value changed: update signal, skip resize op\\n      if (view.width() !== width) {\\n        rerun = 1;\\n        view.signal(Width, width, Skip); // set width, skip update calc\\n        view._resizeWidth.skip(true); // skip width resize handler\\n      }\\n\\n      // height value changed: update signal, skip resize op\\n      if (view.height() !== height) {\\n        rerun = 1;\\n        view.signal(Height, height, Skip); // set height, skip update calc\\n        view._resizeHeight.skip(true); // skip height resize handler\\n      }\\n\\n      // view width changed: update view property, set resize flag\\n      if (view._viewWidth !== viewWidth) {\\n        view._resize = 1;\\n        view._viewWidth = viewWidth;\\n      }\\n\\n      // view height changed: update view property, set resize flag\\n      if (view._viewHeight !== viewHeight) {\\n        view._resize = 1;\\n        view._viewHeight = viewHeight;\\n      }\\n\\n      // origin changed: update view property, set resize flag\\n      if (view._origin[0] !== origin[0] || view._origin[1] !== origin[1]) {\\n        view._resize = 1;\\n        view._origin = origin;\\n      }\\n\\n      // run dataflow on width/height signal change\\n      if (rerun) view.run('enter');\\n      if (auto) view.runAfter(v => v.resize());\\n    }, false, 1);\\n  }\\n\\n  /**\\n   * Get the current view state, consisting of signal values and/or data sets.\\n   * @param {object} [options] - Options flags indicating which state to export.\\n   *   If unspecified, all signals and data sets will be exported.\\n   * @param {function(string, Operator):boolean} [options.signals] - Optional\\n   *   predicate function for testing if a signal should be included in the\\n   *   exported state. If unspecified, all signals will be included, except for\\n   *   those named 'parent' or those which refer to a Transform value.\\n   * @param {function(string, object):boolean} [options.data] - Optional\\n   *   predicate function for testing if a data set's input should be included\\n   *   in the exported state. If unspecified, all data sets that have been\\n   *   explicitly modified will be included.\\n   * @param {boolean} [options.recurse=true] - Flag indicating if the exported\\n   *   state should recursively include state from group mark sub-contexts.\\n   * @return {object} - An object containing the exported state values.\\n   */\\n  function getState(options) {\\n    return this._runtime.getState(options || {\\n      data:    dataTest,\\n      signals: signalTest,\\n      recurse: true\\n    });\\n  }\\n\\n  function dataTest(name, data) {\\n    return data.modified\\n        && vegaUtil.isArray(data.input.value)\\n        && name.indexOf('_:vega:_');\\n  }\\n\\n  function signalTest(name, op) {\\n    return !(name === 'parent' || op instanceof vegaDataflow.transforms.proxy);\\n  }\\n\\n  /**\\n   * Sets the current view state and updates the view by invoking run.\\n   * @param {object} state - A state object containing signal and/or\\n   *   data set values, following the format used by the getState method.\\n   * @return {View} - This view instance.\\n   */\\n  function setState(state) {\\n    this.runAsync(null,\\n      v => { v._trigger = false; v._runtime.setState(state); },\\n      v => { v._trigger = true; }\\n    );\\n    return this;\\n  }\\n\\n  function timer(callback, delay) {\\n    function tick(elapsed) {\\n      callback({timestamp: Date.now(), elapsed: elapsed});\\n    }\\n    this._timers.push(d3Timer.interval(tick, delay));\\n  }\\n\\n  function defaultTooltip(handler, event, item, value) {\\n    var el = handler.element();\\n    if (el) el.setAttribute('title', formatTooltip(value));\\n  }\\n\\n  function formatTooltip(value) {\\n    return value == null ? ''\\n      : vegaUtil.isArray(value) ? formatArray(value)\\n      : vegaUtil.isObject(value) && !vegaUtil.isDate(value) ? formatObject(value)\\n      : value + '';\\n  }\\n\\n  function formatObject(obj) {\\n    return Object.keys(obj).map(key => {\\n      var v = obj[key];\\n      return key + ': ' + (vegaUtil.isArray(v) ? formatArray(v) : formatValue(v));\\n    }).join('\\\\n');\\n  }\\n\\n  function formatArray(value) {\\n    return '[' + value.map(formatValue).join(', ') + ']';\\n  }\\n\\n  function formatValue(value) {\\n    return vegaUtil.isArray(value) ? '[\\\\u2026]'\\n      : vegaUtil.isObject(value) && !vegaUtil.isDate(value) ? '{\\\\u2026}'\\n      : value;\\n  }\\n\\n  /**\\n   * Create a new View instance from a Vega dataflow runtime specification.\\n   * The generated View will not immediately be ready for display. Callers\\n   * should also invoke the initialize method (e.g., to set the parent\\n   * DOM element in browser-based deployment) and then invoke the run\\n   * method to evaluate the dataflow graph. Rendering will automatically\\n   * be performed upon dataflow runs.\\n   * @constructor\\n   * @param {object} spec - The Vega dataflow runtime specification.\\n   */\\n  function View(spec, options) {\\n    const view = this;\\n    options = options || {};\\n\\n    vegaDataflow.Dataflow.call(view);\\n    if (options.loader) view.loader(options.loader);\\n    if (options.logger) view.logger(options.logger);\\n    if (options.logLevel != null) view.logLevel(options.logLevel);\\n    if (options.locale || spec.locale) {\\n      const loc = vegaUtil.extend({}, spec.locale, options.locale);\\n      view.locale(vegaFormat.locale(loc.number, loc.time));\\n    }\\n\\n    view._el = null;\\n    view._elBind = null;\\n    view._renderType = options.renderer || vegaScenegraph.RenderType.Canvas;\\n    view._scenegraph = new vegaScenegraph.Scenegraph();\\n    const root = view._scenegraph.root;\\n\\n    // initialize renderer, handler and event management\\n    view._renderer = null;\\n    view._tooltip = options.tooltip || defaultTooltip,\\n    view._redraw = true;\\n    view._handler = new vegaScenegraph.CanvasHandler().scene(root);\\n    view._globalCursor = false;\\n    view._preventDefault = false;\\n    view._timers = [];\\n    view._eventListeners = [];\\n    view._resizeListeners = [];\\n\\n    // initialize event configuration\\n    view._eventConfig = initializeEventConfig(spec.eventConfig);\\n    view.globalCursor(view._eventConfig.globalCursor);\\n\\n    // initialize dataflow graph\\n    const ctx = runtime(view, spec, options.expr);\\n    view._runtime = ctx;\\n    view._signals = ctx.signals;\\n    view._bind = (spec.bindings || []).map(_ => ({\\n      state: null,\\n      param: vegaUtil.extend({}, _)\\n    }));\\n\\n    // initialize scenegraph\\n    if (ctx.root) ctx.root.set(root);\\n    root.source = ctx.data.root.input;\\n    view.pulse(\\n      ctx.data.root.input,\\n      view.changeset().insert(root.items)\\n    );\\n\\n    // initialize view size\\n    view._width = view.width();\\n    view._height = view.height();\\n    view._viewWidth = viewWidth(view, view._width);\\n    view._viewHeight = viewHeight(view, view._height);\\n    view._origin = [0, 0];\\n    view._resize = 0;\\n    view._autosize = 1;\\n    initializeResize(view);\\n\\n    // initialize background color\\n    background(view);\\n\\n    // initialize cursor\\n    cursor(view);\\n\\n    // initialize view description\\n    view.description(spec.description);\\n\\n    // initialize hover proessing, if requested\\n    if (options.hover) view.hover();\\n\\n    // initialize DOM container(s) and renderer\\n    if (options.container) view.initialize(options.container, options.bind);\\n  }\\n\\n  function lookupSignal(view, name) {\\n    return vegaUtil.hasOwnProperty(view._signals, name)\\n      ? view._signals[name]\\n      : vegaUtil.error('Unrecognized signal name: ' + vegaUtil.stringValue(name));\\n  }\\n\\n  function findOperatorHandler(op, handler) {\\n    const h = (op._targets || [])\\n      .filter(op => op._update && op._update.handler === handler);\\n    return h.length ? h[0] : null;\\n  }\\n\\n  function addOperatorListener(view, name, op, handler) {\\n    var h = findOperatorHandler(op, handler);\\n    if (!h) {\\n      h = trap(view, () => handler(name, op.value));\\n      h.handler = handler;\\n      view.on(op, null, h);\\n    }\\n    return view;\\n  }\\n\\n  function removeOperatorListener(view, op, handler) {\\n    var h = findOperatorHandler(op, handler);\\n    if (h) op._targets.remove(h);\\n    return view;\\n  }\\n\\n  vegaUtil.inherits(View, vegaDataflow.Dataflow, {\\n    // -- DATAFLOW / RENDERING ----\\n\\n    async evaluate(encode, prerun, postrun) {\\n      // evaluate dataflow and prerun\\n      await vegaDataflow.Dataflow.prototype.evaluate.call(this, encode, prerun);\\n\\n      // render as needed\\n      if (this._redraw || this._resize) {\\n        try {\\n          if (this._renderer) {\\n            if (this._resize) {\\n              this._resize = 0;\\n              resizeRenderer(this);\\n            }\\n            await this._renderer.renderAsync(this._scenegraph.root);\\n          }\\n          this._redraw = false;\\n        } catch (e) {\\n          this.error(e);\\n        }\\n      }\\n\\n      // evaluate postrun\\n      if (postrun) vegaDataflow.asyncCallback(this, postrun);\\n\\n      return this;\\n    },\\n\\n    dirty(item) {\\n      this._redraw = true;\\n      this._renderer && this._renderer.dirty(item);\\n    },\\n\\n    // -- GET / SET ----\\n\\n    description(text) {\\n      if (arguments.length) {\\n        const desc = text != null ? (text + '') : null;\\n        if (desc !== this._desc) ariaLabel(this._el, this._desc = desc);\\n        return this;\\n      }\\n      return this._desc;\\n    },\\n\\n    container() {\\n      return this._el;\\n    },\\n\\n    scenegraph() {\\n      return this._scenegraph;\\n    },\\n\\n    origin() {\\n      return this._origin.slice();\\n    },\\n\\n    signal(name, value, options) {\\n      var op = lookupSignal(this, name);\\n      return arguments.length === 1\\n        ? op.value\\n        : this.update(op, value, options);\\n    },\\n\\n    width(_) {\\n      return arguments.length ? this.signal('width', _) : this.signal('width');\\n    },\\n\\n    height(_) {\\n      return arguments.length ? this.signal('height', _) : this.signal('height');\\n    },\\n\\n    padding(_) {\\n      return arguments.length\\n        ? this.signal('padding', padding(_))\\n        : padding(this.signal('padding'));\\n    },\\n\\n    autosize(_) {\\n      return arguments.length ? this.signal('autosize', _) : this.signal('autosize');\\n    },\\n\\n    background(_) {\\n      return arguments.length ? this.signal('background', _) : this.signal('background');\\n    },\\n\\n    renderer(type) {\\n      if (!arguments.length) return this._renderType;\\n      if (!vegaScenegraph.renderModule(type)) vegaUtil.error('Unrecognized renderer type: ' + type);\\n      if (type !== this._renderType) {\\n        this._renderType = type;\\n        this._resetRenderer();\\n      }\\n      return this;\\n    },\\n\\n    tooltip(handler) {\\n      if (!arguments.length) return this._tooltip;\\n      if (handler !== this._tooltip) {\\n        this._tooltip = handler;\\n        this._resetRenderer();\\n      }\\n      return this;\\n    },\\n\\n    loader(loader) {\\n      if (!arguments.length) return this._loader;\\n      if (loader !== this._loader) {\\n        vegaDataflow.Dataflow.prototype.loader.call(this, loader);\\n        this._resetRenderer();\\n      }\\n      return this;\\n    },\\n\\n    resize() {\\n      // set flag to perform autosize\\n      this._autosize = 1;\\n      // touch autosize signal to ensure top-level ViewLayout runs\\n      return this.touch(lookupSignal(this, 'autosize'));\\n    },\\n\\n    _resetRenderer() {\\n      if (this._renderer) {\\n        this._renderer = null;\\n        this.initialize(this._el, this._elBind);\\n      }\\n    },\\n\\n    // -- SIZING ----\\n    _resizeView: resizeView,\\n\\n    // -- EVENT HANDLING ----\\n\\n    addEventListener(type, handler, options) {\\n      var callback = handler;\\n      if (!(options && options.trap === false)) {\\n        // wrap callback in error handler\\n        callback = trap(this, handler);\\n        callback.raw = handler;\\n      }\\n      this._handler.on(type, callback);\\n      return this;\\n    },\\n\\n    removeEventListener(type, handler) {\\n      var handlers = this._handler.handlers(type),\\n          i = handlers.length, h, t;\\n\\n      // search registered handlers, remove if match found\\n      while (--i >= 0) {\\n        t = handlers[i].type;\\n        h = handlers[i].handler;\\n        if (type === t && (handler === h || handler === h.raw)) {\\n          this._handler.off(t, h);\\n          break;\\n        }\\n      }\\n      return this;\\n    },\\n\\n    addResizeListener(handler) {\\n      var l = this._resizeListeners;\\n      if (l.indexOf(handler) < 0) {\\n        // add handler if it isn't already registered\\n        // note: error trapping handled elsewhere, so\\n        // no need to wrap handlers here\\n        l.push(handler);\\n      }\\n      return this;\\n    },\\n\\n    removeResizeListener(handler) {\\n      var l = this._resizeListeners,\\n          i = l.indexOf(handler);\\n      if (i >= 0) {\\n        l.splice(i, 1);\\n      }\\n      return this;\\n    },\\n\\n    addSignalListener(name, handler) {\\n      return addOperatorListener(this, name, lookupSignal(this, name), handler);\\n    },\\n\\n    removeSignalListener(name, handler) {\\n      return removeOperatorListener(this, lookupSignal(this, name), handler);\\n    },\\n\\n    addDataListener(name, handler) {\\n      return addOperatorListener(this, name, dataref(this, name).values, handler);\\n    },\\n\\n    removeDataListener(name, handler) {\\n      return removeOperatorListener(this, dataref(this, name).values, handler);\\n    },\\n\\n    globalCursor(_) {\\n      if (arguments.length) {\\n        if (this._globalCursor !== !!_) {\\n          const prev = setCursor(this, null); // clear previous cursor\\n          this._globalCursor = !!_;\\n          if (prev) setCursor(this, prev); // swap cursor\\n        }\\n        return this;\\n      } else {\\n        return this._globalCursor;\\n      }\\n    },\\n\\n    preventDefault(_) {\\n      if (arguments.length) {\\n        this._preventDefault = _;\\n        return this;\\n      } else {\\n        return this._preventDefault;\\n      }\\n    },\\n\\n    timer,\\n    events,\\n    finalize,\\n    hover,\\n\\n    // -- DATA ----\\n    data,\\n    change,\\n    insert,\\n    remove,\\n\\n    // -- SCALES --\\n    scale,\\n\\n    // -- INITIALIZATION ----\\n    initialize,\\n\\n    // -- HEADLESS RENDERING ----\\n    toImageURL: renderToImageURL,\\n    toCanvas: renderToCanvas,\\n    toSVG: renderToSVG,\\n\\n    // -- SAVE / RESTORE STATE ----\\n    getState,\\n    setState\\n  });\\n\\n  exports.View = View;\\n\\n  Object.defineProperty(exports, '__esModule', { value: true });\\n\\n})));\\n\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"factory\",\"define\",\"amd\",\"globalThis\",\"self\",\"vega\",\"d3\",\"vegaUtil\",\"vegaDataflow\",\"vegaScenegraph\",\"d3Array\",\"vegaFunctions\",\"vegaRuntime\",\"d3Timer\",\"vegaFormat\",\"initializeAria\",\"view\",\"el\",\"container\",\"setAttribute\",\"ariaLabel\",\"description\",\"desc\",\"removeAttribute\",\"background\",\"add\",\"_\",\"_background\",\"bg\",\"_resize\",\"_signals\",\"cursor\",\"user\",\"Default\",\"item\",\"on\",\"events\",\"event\",\"value\",\"isString\",\"setCursor\",\"globalCursor\",\"document\",\"body\",\"style\",\"removeProperty\",\"dataref\",\"name\",\"data\",\"_runtime\",\"hasOwnProperty\",\"error\",\"change\",\"changes\",\"isChangeSet\",\"dataset\",\"modified\",\"pulse\",\"input\",\"width\",\"padding\",\"Math\",\"max\",\"_viewWidth\",\"left\",\"right\",\"height\",\"_viewHeight\",\"top\",\"bottom\",\"offset\",\"origin\",\"_origin\",\"resizeRenderer\",\"w\",\"h\",\"_renderer\",\"resize\",\"_handler\",\"_resizeListeners\",\"forEach\",\"handler\",\"eventExtend\",\"r\",\"canvas\",\"translate\",\"e\",\"changedTouches\",\"p\",\"point\",\"dataflow\",\"extension\",\"group\",\"g\",\"itemGroup\",\"i\",\"mark\",\"interactive\",\"xy\",\"slice\",\"x\",\"y\",\"marktype\",\"constant\",\"initializeEventConfig\",\"config\",\"extend\",\"defaults\",\"unpack\",\"obj\",\"keys\",\"k\",\"isArray\",\"toSet\",\"permit\",\"key\",\"type\",\"rule\",\"_eventConfig\",\"isObject\",\"warn\",\"itemFilter\",\"markTarget\",\"source\",\"invoke\",\"changeset\",\"encode\",\"element\",\"tag\",\"attr\",\"text\",\"createElement\",\"textContent\",\"bind\",\"binding\",\"param\",\"state\",\"elements\",\"active\",\"set\",\"update\",\"signal\",\"runAsync\",\"debounce\",\"generate\",\"div\",\"BindClass\",\"wrapper\",\"appendChild\",\"NameClass\",\"form\",\"checkbox\",\"select\",\"radio\",\"range\",\"node\",\"addEventListener\",\"bind.set\",\"checked\",\"labels\",\"options\",\"option\",\"valuesEqual\",\"selected\",\"selectedIndex\",\"n\",\"length\",\"RadioClass\",\"map\",\"label\",\"prepend\",\"nodes\",\"undefined\",\"min\",\"step\",\"tickStep\",\"span\",\"a\",\"b\",\"initializeRenderer\",\"constructor\",\"scaleFactor\",\"opt\",\"loader\",\"initialize\",\"trap\",\"fn\",\"apply\",\"arguments\",\"initializeHandler\",\"prevHandler\",\"tooltip\",\"scene\",\"scenegraph\",\"root\",\"handlers\",\"lookup\",\"querySelector\",\"innerHTML\",\"renderHeadless\",\"ctr\",\"renderModule\",\"headless\",\"renderAsync\",\"_scenegraph\",\"toBlobURL\",\"mime\",\"blob\",\"Blob\",\"window\",\"URL\",\"createObjectURL\",\"runtime\",\"spec\",\"expr\",\"context\",\"transforms\",\"functionContext\",\"parse\",\"viewWidth\",\"autosize\",\"Padding\",\"contains\",\"viewHeight\",\"initializeResize\",\"resetSize\",\"_autosize\",\"s\",\"Width\",\"Height\",\"_resizeWidth\",\"_width\",\"size\",\"_resizeHeight\",\"_height\",\"resizePadding\",\"pad\",\"rank\",\"dataTest\",\"indexOf\",\"signalTest\",\"op\",\"proxy\",\"defaultTooltip\",\"formatTooltip\",\"formatValue\",\"join\",\"isDate\",\"formatObject\",\"Object\",\"v\",\"View\",\"Dataflow\",\"call\",\"logger\",\"logLevel\",\"locale\",\"loc\",\"number\",\"time\",\"_elBind\",\"_el\",\"_renderType\",\"renderer\",\"RenderType\",\"Canvas\",\"Scenegraph\",\"_tooltip\",\"_redraw\",\"CanvasHandler\",\"_preventDefault\",\"_globalCursor\",\"_timers\",\"_eventListeners\",\"eventConfig\",\"ctx\",\"signals\",\"_bind\",\"bindings\",\"insert\",\"items\",\"hover\",\"lookupSignal\",\"stringValue\",\"findOperatorHandler\",\"_targets\",\"filter\",\"_update\",\"addOperatorListener\",\"removeOperatorListener\",\"remove\",\"NO_TRAP\",\"Skip\",\"skip\",\"inherits\",\"evaluate\",\"prerun\",\"postrun\",\"prototype\",\"asyncCallback\",\"dirty\",\"_desc\",\"_resetRenderer\",\"_loader\",\"touch\",\"_resizeView\",\"resizeView\",\"auto\",\"runAfter\",\"rerun\",\"run\",\"callback\",\"raw\",\"removeEventListener\",\"t\",\"off\",\"addResizeListener\",\"l\",\"push\",\"removeResizeListener\",\"splice\",\"addSignalListener\",\"removeSignalListener\",\"addDataListener\",\"values\",\"removeDataListener\",\"prev\",\"preventDefault\",\"timer\",\"delay\",\"interval\",\"tick\",\"elapsed\",\"timestamp\",\"Date\",\"now\",\"EventStream\",\"send\",\"def\",\"prevent\",\"allow\",\"receive\",\"sources\",\"TIMER\",\"VIEW\",\"WINDOW\",\"querySelectorAll\",\"finalize\",\"timers\",\"listeners\",\"stop\",\"m\",\"hoverSet\",\"leaveSet\",\"truthy\",\"scale\",\"scales\",\"elBind\",\"Handler\",\"Renderer\",\"toImageURL\",\"renderToImageURL\",\"SVG\",\"PNG\",\"svg\",\"toDataURL\",\"toCanvas\",\"renderToCanvas\",\"toSVG\",\"renderToSVG\",\"getState\",\"recurse\",\"setState\",\"_trigger\",\"defineProperty\"]\n}\n"]