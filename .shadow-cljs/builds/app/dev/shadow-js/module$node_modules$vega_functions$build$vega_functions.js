["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/vega-functions/build/vega-functions.js"],"~:js","shadow$provide.module$node_modules$vega_functions$build$vega_functions=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\"object\"===typeof exports$jscomp$0&&\"undefined\"!==typeof module?factory(exports$jscomp$0,require(\"module$node_modules$vega_util$build$vega_util\"),require(\"module$node_modules$vega_expression$build$vega_expression\"),require(\"module$node_modules$d3_geo$dist$d3_geo\"),require(\"module$node_modules$d3_color$dist$d3_color\"),require(\"module$node_modules$vega_dataflow$build$vega_dataflow\"),\nrequire(\"module$node_modules$vega_scale$build$vega_scale\"),require(\"module$node_modules$vega_scenegraph$build$vega_scenegraph\"),require(\"module$node_modules$vega_selections$build$vega_selections\"),require(\"module$node_modules$vega_statistics$build$vega_statistics\"),require(\"module$node_modules$vega_time$build$vega_time\"),require(\"module$node_modules$d3_array$dist$d3_array\")):\"function\"===typeof define&&define.amd?define(\"exports vega-util vega-expression d3-geo d3-color vega-dataflow vega-scale vega-scenegraph vega-selections vega-statistics vega-time d3-array\".split(\" \"),\nfactory):(global=\"undefined\"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.vega,global.vega,global.d3,global.d3,global.vega,global.vega,global.vega,global.vega,global.vega,global.vega,global.d3))})(this,function(exports,vegaUtil,vegaExpression,d3Geo,d3Color,vegaDataflow,vegaScale,vegaScenegraph,vegaSelections,vegaStatistics,vegaTime,d3Array){function data$jscomp$0(name){return(name=this.context.data[name])?name.values.value:[]}function indata(name,field,value){return(value=\n(name=this.context.data[name][\"index:\"+field])?name.value.get(value):void 0)?value.count:value}function setdata(name,tuples){var df=this.context.dataflow;df.pulse(this.context.data[name].input,df.changeset().remove(vegaUtil.truthy).insert(tuples));return 1}function encode(item,name,retval){if(item){var df=this.context.dataflow;df.pulse(item.mark.source,df.changeset().encode(item,name))}return void 0!==retval?retval:item}function time(month,day,specifier){if(!Number.isInteger(month)||!Number.isInteger(day))return\"\";\ndateObj.setYear(2E3);dateObj.setMonth(month);dateObj.setDate(day);return timeFormat.call(this,dateObj,specifier)}function monthFormat(month){return time.call(this,month,1,\"%B\")}function monthAbbrevFormat(month){return time.call(this,month,1,\"%b\")}function dayFormat(day){return time.call(this,0,2+day,\"%A\")}function dayAbbrevFormat(day){return time.call(this,0,2+day,\"%a\")}function dataVisitor(name,args,scope,params){args[0].type!==vegaExpression.Literal&&vegaUtil.error(\"First argument to data functions must be a string literal.\");\nname=args[0].value;args=\":\"+name;if(!vegaUtil.hasOwnProperty(args,params))try{params[args]=scope.getData(name).tuplesRef()}catch(err){}}function indataVisitor(name,args,scope,params){args[0].type!==vegaExpression.Literal&&vegaUtil.error(\"First argument to indata must be a string literal.\");args[1].type!==vegaExpression.Literal&&vegaUtil.error(\"Second argument to indata must be a string literal.\");name=args[0].value;args=args[1].value;var indexName=\"@\"+args;vegaUtil.hasOwnProperty(indexName,params)||\n(params[indexName]=scope.getData(name).indataRef(scope,args))}function scaleVisitor(name,args,scope,params){if(args[0].type===vegaExpression.Literal)addScaleDependency(scope,params,args[0].value);else for(name in scope.scales)addScaleDependency(scope,params,name)}function addScaleDependency(scope,params,name){var scaleName=\"%\"+name;if(!vegaUtil.hasOwnProperty(params,scaleName))try{params[scaleName]=scope.scaleRef(name)}catch(err){}}function getScale(name,ctx){var s;return vegaUtil.isFunction(name)?\nname:vegaUtil.isString(name)?(s=ctx.scales[name])&&s.value:void 0}function internalScaleFunctions(codegen,fnctx,visitors){fnctx.__bandwidth=function(s){return s&&s.bandwidth?s.bandwidth():0};visitors._bandwidth=scaleVisitor;visitors._range=scaleVisitor;visitors._scale=scaleVisitor;var ref=function(arg){return\"_[\"+(arg.type===vegaExpression.Literal?vegaUtil.stringValue(\"%\"+arg.value):vegaUtil.stringValue(\"%\")+\"+\"+codegen(arg))+\"]\"};return{_bandwidth:function(args){return\"this.__bandwidth(\"+ref(args[0])+\n\")\"},_range:function(args){return ref(args[0])+\".range()\"},_scale:function(args){return ref(args[0])+\"(\"+codegen(args[1])+\")\"}}}function geoMethod(methodName,globalMethod){return function(projection,geojson,group){return projection?(projection=getScale(projection,(group||this).context))&&projection.path[methodName](geojson):globalMethod(geojson)}}function inScope(item){var group=this.context.group,value=!1;if(group)for(;item;){if(item===group){value=!0;break}item=item.mark.group}return value}function log(df,\nmethod,args){try{df[method].apply(df,[\"EXPRESSION\"].concat([].slice.call(args)))}catch(err){df.warn(err)}return args[args.length-1]}function warn(){return log(this.context.dataflow,\"warn\",arguments)}function info(){return log(this.context.dataflow,\"info\",arguments)}function debug(){return log(this.context.dataflow,\"debug\",arguments)}function channel_luminance_value(channelValue){channelValue/=255;return.03928>=channelValue?channelValue/12.92:Math.pow((channelValue+.055)/1.055,2.4)}function luminance(color){var c=\nd3Color.rgb(color);color=channel_luminance_value(c.r);var g=channel_luminance_value(c.g);c=channel_luminance_value(c.b);return.2126*color+.7152*g+.0722*c}function contrast(color1,color2){color1=luminance(color1);color2=luminance(color2);return(Math.max(color1,color2)+.05)/(Math.min(color1,color2)+.05)}function merge(){var args=[].slice.call(arguments);args.unshift({});return vegaUtil.extend.apply(null,args)}function equal(a,b){if(a===b||a!==a&&b!==b)a=!0;else if(vegaUtil.isArray(a))if(vegaUtil.isArray(b)&&\na.length===b.length)a:{for(var i=0,n=a.length;i<n;++i)if(!equal(a[i],b[i])){a=!1;break a}a=!0}else a=!1;else a=vegaUtil.isObject(a)&&vegaUtil.isObject(b)?equalObject(a,b):!1;return a}function equalObject(a,b){for(var key in a)if(!equal(a[key],b[key]))return!1;return!0}function removePredicate(props){return function(_){return equalObject(props,_)}}function modify$jscomp$0(name,insert,remove,toggle,modify,values){var df=this.context.dataflow,data=this.context.data[name],input=data.input;name=df.stamp();\nvar changes=data.changes,key;if(!1===df._trigger||!(input.value.length||insert||toggle))return 0;if(!changes||changes.stamp<name)data.changes=changes=df.changeset(),changes.stamp=name,df.runAfter(function(){data.modified=!0;df.pulse(input,changes).run()},!0,1);remove&&(remove=!0===remove?vegaUtil.truthy:vegaUtil.isArray(remove)||vegaDataflow.isTuple(remove)?remove:removePredicate(remove),changes.remove(remove));insert&&changes.insert(insert);toggle&&(remove=removePredicate(toggle),input.value.some(remove)?\nchanges.remove(remove):changes.insert(toggle));if(modify)for(key in values)changes.modify(modify,key,values[key]);return 1}function pinchDistance(event){var t=event.touches;event=t[0].clientX-t[1].clientX;t=t[0].clientY-t[1].clientY;return Math.sqrt(event*event+t*t)}function pinchAngle(event){event=event.touches;return Math.atan2(event[0].clientY-event[1].clientY,event[0].clientX-event[1].clientX)}function bandspace(count,paddingInner,paddingOuter){return vegaScale.bandSpace(count||0,paddingInner||\n0,paddingOuter||0)}function bandwidth(name,group){return(name=getScale(name,(group||this).context))&&name.bandwidth?name.bandwidth():0}function copy(name,group){return(name=getScale(name,(group||this).context))?name.copy():void 0}function domain(name,group){return(name=getScale(name,(group||this).context))?name.domain():[]}function invert(name,range,group){return(name=getScale(name,(group||this).context))?vegaUtil.isArray(range)?(name.invertRange||name.invert)(range):(name.invert||name.invertExtent)(range):\nvoid 0}function range$jscomp$0(name,group){return(name=getScale(name,(group||this).context))&&name.range?name.range():[]}function scale$jscomp$0(name,value,group){return(name=getScale(name,(group||this).context))?name(value):void 0}function scaleGradient(scale,p0,p1,count,group){scale=getScale(scale,(group||this).context);var gradient=vegaScenegraph.Gradient(p0,p1);p0=scale.domain();p1=p0[0];group=vegaUtil.peek(p0);var fraction=vegaUtil.identity;group-p1?fraction=vegaScale.scaleFraction(scale,p1,\ngroup):scale=(scale.interpolator?vegaScale.scale(\"sequential\")().interpolator(scale.interpolator()):vegaScale.scale(\"linear\")().interpolate(scale.interpolate()).range(scale.range())).domain([p1=0,group=1]);scale.ticks&&(p0=scale.ticks(+count||15),p1!==p0[0]&&p0.unshift(p1),group!==vegaUtil.peek(p0)&&p0.push(group));p0.forEach(function(_){return gradient.stop(fraction(_),scale(_))});return gradient}function geoShape(projection,geojson,group){var p=getScale(projection,(group||this).context);return function(context){return p?\np.path.context(context)(geojson):\"\"}}function pathShape(path){var p=null;return function(context){return context?vegaScenegraph.pathRender(context,p=p||vegaScenegraph.pathParse(path)):path}}function treeNodes(name,context){name=data$jscomp$0.call(context,name);return name.root&&name.root.lookup||{}}function treePath(name,source,target){name=treeNodes(name,this);source=name[source];target=name[target];return source&&target?source.path(target).map(datum):void 0}function treeAncestors(name,node){return(name=\ntreeNodes(name,this)[node])?name.ancestors().map(datum):void 0}function screen(){var w=\"undefined\"!==typeof window&&window||null;return w?w.screen:{}}function windowSize(){var w=\"undefined\"!==typeof window&&window||null;return w?[w.innerWidth,w.innerHeight]:[void 0,void 0]}function containerSize(){var view=this.context.dataflow;return(view=view.container&&view.container())?[view.clientWidth,view.clientHeight]:[void 0,void 0]}function filter(opt){var p=null;if(opt){var types=vegaUtil.array(opt.marktype),\nnames=vegaUtil.array(opt.markname);p=function(_){return(!types.length||types.some(function(t){return _.marktype===t}))&&(!names.length||names.some(function(s){return _.name===s}))}}return p}function expressionFunction(name,fn,visitor){if(1===arguments.length)return functionContext[name];functionContext[name]=fn;visitor&&(astVisitors[name]=visitor);codeGenerator&&(codeGenerator.functions[name]=\"this.\"+name);return this}var wrap=function(method){return function(value,spec){return this.context.dataflow.locale()[method](spec)(value)}},\nformat=wrap(\"format\"),timeFormat=wrap(\"timeFormat\"),utcFormat=wrap(\"utcFormat\"),timeParse=wrap(\"timeParse\");wrap=wrap(\"utcParse\");var dateObj=new Date(2E3,0,1),geoArea=geoMethod(\"area\",d3Geo.geoArea),geoBounds=geoMethod(\"bounds\",d3Geo.geoBounds);d3Geo=geoMethod(\"centroid\",d3Geo.geoCentroid);var datum=function(d){return d.data},functionContext={random:function(){return vegaStatistics.random()},cumulativeNormal:vegaStatistics.cumulativeNormal,cumulativeLogNormal:vegaStatistics.cumulativeLogNormal,cumulativeUniform:vegaStatistics.cumulativeUniform,\ndensityNormal:vegaStatistics.densityNormal,densityLogNormal:vegaStatistics.densityLogNormal,densityUniform:vegaStatistics.densityUniform,quantileNormal:vegaStatistics.quantileNormal,quantileLogNormal:vegaStatistics.quantileLogNormal,quantileUniform:vegaStatistics.quantileUniform,sampleNormal:vegaStatistics.sampleNormal,sampleLogNormal:vegaStatistics.sampleLogNormal,sampleUniform:vegaStatistics.sampleUniform,isArray:vegaUtil.isArray,isBoolean:vegaUtil.isBoolean,isDate:vegaUtil.isDate,isDefined:function(_){return void 0!==\n_},isNumber:vegaUtil.isNumber,isObject:vegaUtil.isObject,isRegExp:vegaUtil.isRegExp,isString:vegaUtil.isString,isTuple:vegaDataflow.isTuple,isValid:function(_){return null!=_&&_===_},toBoolean:vegaUtil.toBoolean,toDate:vegaUtil.toDate,toNumber:vegaUtil.toNumber,toString:vegaUtil.toString,flush:vegaUtil.flush,lerp:vegaUtil.lerp,merge:merge,pad:vegaUtil.pad,peek:vegaUtil.peek,span:vegaUtil.span,inrange:vegaUtil.inrange,truncate:vegaUtil.truncate,rgb:d3Color.rgb,lab:d3Color.lab,hcl:d3Color.hcl,hsl:d3Color.hsl,\nluminance:luminance,contrast:contrast,sequence:d3Array.range,format:format,utcFormat:utcFormat,utcParse:wrap,utcOffset:vegaTime.utcOffset,utcSequence:vegaTime.utcSequence,timeFormat:timeFormat,timeParse:timeParse,timeOffset:vegaTime.timeOffset,timeSequence:vegaTime.timeSequence,timeUnitSpecifier:vegaTime.timeUnitSpecifier,monthFormat:monthFormat,monthAbbrevFormat:monthAbbrevFormat,dayFormat:dayFormat,dayAbbrevFormat:dayAbbrevFormat,quarter:vegaUtil.quarter,utcquarter:vegaUtil.utcquarter,week:vegaTime.week,\nutcweek:vegaTime.utcweek,dayofyear:vegaTime.dayofyear,utcdayofyear:vegaTime.utcdayofyear,warn:warn,info:info,debug:debug,extent:vegaUtil.extent,inScope:inScope,intersect:function(b,opt,group){if(!b)return[];var $jscomp$destructuring$var49=$jscomp.makeIterator(b);b=$jscomp$destructuring$var49.next().value;$jscomp$destructuring$var49=$jscomp$destructuring$var49.next().value;b=(new vegaScenegraph.Bounds).set(b[0],b[1],$jscomp$destructuring$var49[0],$jscomp$destructuring$var49[1]);group=group||this.context.dataflow.scenegraph().root;\nreturn vegaScenegraph.intersect(group,b,filter(opt))},clampRange:vegaUtil.clampRange,pinchDistance:pinchDistance,pinchAngle:pinchAngle,screen:screen,containerSize:containerSize,windowSize:windowSize,bandspace:bandspace,setdata:setdata,pathShape:pathShape,panLinear:vegaUtil.panLinear,panLog:vegaUtil.panLog,panPow:vegaUtil.panPow,panSymlog:vegaUtil.panSymlog,zoomLinear:vegaUtil.zoomLinear,zoomLog:vegaUtil.zoomLog,zoomPow:vegaUtil.zoomPow,zoomSymlog:vegaUtil.zoomSymlog,encode:encode,modify:modify$jscomp$0},\neventFunctions=\"view item group xy x y\".split(\" \"),astVisitors={},codegenParams={blacklist:[\"_\"],whitelist:[\"datum\",\"event\",\"item\"],fieldvar:\"datum\",globalvar:function(id){return\"_[\"+vegaUtil.stringValue(\"$\"+id)+\"]\"},functions:function(codegen){var fn=vegaExpression.functions(codegen);eventFunctions.forEach(function(name){return fn[name]=\"event.vega.\"+name});for(var name$jscomp$0 in functionContext)fn[name$jscomp$0]=\"this.\"+name$jscomp$0;vegaUtil.extend(fn,internalScaleFunctions(codegen,functionContext,\nastVisitors));return fn},constants:vegaExpression.constants,visitors:astVisitors},codeGenerator=vegaExpression.codegen(codegenParams);expressionFunction(\"bandwidth\",bandwidth,scaleVisitor);expressionFunction(\"copy\",copy,scaleVisitor);expressionFunction(\"domain\",domain,scaleVisitor);expressionFunction(\"range\",range$jscomp$0,scaleVisitor);expressionFunction(\"invert\",invert,scaleVisitor);expressionFunction(\"scale\",scale$jscomp$0,scaleVisitor);expressionFunction(\"gradient\",scaleGradient,scaleVisitor);\nexpressionFunction(\"geoArea\",geoArea,scaleVisitor);expressionFunction(\"geoBounds\",geoBounds,scaleVisitor);expressionFunction(\"geoCentroid\",d3Geo,scaleVisitor);expressionFunction(\"geoShape\",geoShape,scaleVisitor);expressionFunction(\"indata\",indata,indataVisitor);expressionFunction(\"data\",data$jscomp$0,dataVisitor);expressionFunction(\"treePath\",treePath,dataVisitor);expressionFunction(\"treeAncestors\",treeAncestors,dataVisitor);expressionFunction(\"vlSelectionTest\",vegaSelections.selectionTest,vegaSelections.selectionVisitor);\nexpressionFunction(\"vlSelectionResolve\",vegaSelections.selectionResolve,vegaSelections.selectionVisitor);exports.DataPrefix=\":\";exports.IndexPrefix=\"@\";exports.ScalePrefix=\"%\";exports.SignalPrefix=\"$\";exports.bandspace=bandspace;exports.bandwidth=bandwidth;exports.codeGenerator=codeGenerator;exports.codegenParams=codegenParams;exports.containerSize=containerSize;exports.contrast=contrast;exports.copy=copy;exports.data=data$jscomp$0;exports.dataVisitor=dataVisitor;exports.dayAbbrevFormat=dayAbbrevFormat;\nexports.dayFormat=dayFormat;exports.debug=debug;exports.domain=domain;exports.encode=encode;exports.expressionFunction=expressionFunction;exports.format=format;exports.functionContext=functionContext;exports.geoArea=geoArea;exports.geoBounds=geoBounds;exports.geoCentroid=d3Geo;exports.geoShape=geoShape;exports.inScope=inScope;exports.indata=indata;exports.indataVisitor=indataVisitor;exports.info=info;exports.invert=invert;exports.luminance=luminance;exports.merge=merge;exports.modify=modify$jscomp$0;\nexports.monthAbbrevFormat=monthAbbrevFormat;exports.monthFormat=monthFormat;exports.parseExpression=function(expr,scope){var params={};try{expr=vegaUtil.isString(expr)?expr:vegaUtil.stringValue(expr)+\"\";var ast=vegaExpression.parse(expr)}catch(err){vegaUtil.error(\"Expression parse error: \"+expr)}ast.visit(function(node){if(node.type===vegaExpression.CallExpression){var name=node.callee.name,visit=codegenParams.visitors[name];visit&&visit(name,node.arguments,scope,params)}});expr=codeGenerator(ast);\nexpr.globals.forEach(function(name){var signalName=\"$\"+name;!vegaUtil.hasOwnProperty(params,signalName)&&scope.getSignal(name)&&(params[signalName]=scope.signalRef(name))});return{$expr:vegaUtil.extend({code:expr.code},scope.options.ast?{ast:ast}:null),$fields:expr.fields,$params:params}};exports.pathShape=pathShape;exports.pinchAngle=pinchAngle;exports.pinchDistance=pinchDistance;exports.range=range$jscomp$0;exports.scale=scale$jscomp$0;exports.scaleGradient=scaleGradient;exports.scaleVisitor=scaleVisitor;\nexports.screen=screen;exports.setdata=setdata;exports.timeFormat=timeFormat;exports.timeParse=timeParse;exports.treeAncestors=treeAncestors;exports.treePath=treePath;exports.utcFormat=utcFormat;exports.utcParse=wrap;exports.warn=warn;exports.windowSize=windowSize;Object.defineProperty(exports,\"__esModule\",{value:!0})})}","~:source","shadow$provide[\"module$node_modules$vega_functions$build$vega_functions\"] = function(global,require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-expression'), require('d3-geo'), require('d3-color'), require('vega-dataflow'), require('vega-scale'), require('vega-scenegraph'), require('vega-selections'), require('vega-statistics'), require('vega-time'), require('d3-array')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-expression', 'd3-geo', 'd3-color', 'vega-dataflow', 'vega-scale', 'vega-scenegraph', 'vega-selections', 'vega-statistics', 'vega-time', 'd3-array'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.d3, global.d3, global.vega, global.vega, global.vega, global.vega, global.vega, global.vega, global.d3));\n}(this, (function (exports, vegaUtil, vegaExpression, d3Geo, d3Color, vegaDataflow, vegaScale, vegaScenegraph, vegaSelections, vegaStatistics, vegaTime, d3Array) { 'use strict';\n\n  function data(name) {\n    const data = this.context.data[name];\n    return data ? data.values.value : [];\n  }\n\n  function indata(name, field, value) {\n    const index = this.context.data[name]['index:' + field],\n          entry = index ? index.value.get(value) : undefined;\n    return entry ? entry.count : entry;\n  }\n\n  function setdata(name, tuples) {\n    const df = this.context.dataflow,\n          data = this.context.data[name],\n          input = data.input;\n\n    df.pulse(input, df.changeset().remove(vegaUtil.truthy).insert(tuples));\n    return 1;\n  }\n\n  function encode(item, name, retval) {\n    if (item) {\n      const df = this.context.dataflow,\n            target = item.mark.source;\n      df.pulse(target, df.changeset().encode(item, name));\n    }\n    return retval !== undefined ? retval : item;\n  }\n\n  const wrap = method => function(value, spec) {\n    const locale = this.context.dataflow.locale();\n    return locale[method](spec)(value);\n  };\n\n  const format = wrap('format');\n  const timeFormat = wrap('timeFormat');\n  const utcFormat = wrap('utcFormat');\n  const timeParse = wrap('timeParse');\n  const utcParse = wrap('utcParse');\n\n  const dateObj = new Date(2000, 0, 1);\n\n  function time(month, day, specifier) {\n    if (!Number.isInteger(month) || !Number.isInteger(day)) return '';\n    dateObj.setYear(2000);\n    dateObj.setMonth(month);\n    dateObj.setDate(day);\n    return timeFormat.call(this, dateObj, specifier);\n  }\n\n  function monthFormat(month) {\n    return time.call(this, month, 1, '%B');\n  }\n\n  function monthAbbrevFormat(month) {\n    return time.call(this, month, 1, '%b');\n  }\n\n  function dayFormat(day) {\n    return time.call(this, 0, 2 + day, '%A');\n  }\n\n  function dayAbbrevFormat(day) {\n    return time.call(this, 0, 2 + day, '%a');\n  }\n\n  const DataPrefix   = ':';\n  const IndexPrefix  = '@';\n  const ScalePrefix  = '%';\n  const SignalPrefix = '$';\n\n  function dataVisitor(name, args, scope, params) {\n    if (args[0].type !== vegaExpression.Literal) {\n      vegaUtil.error('First argument to data functions must be a string literal.');\n    }\n\n    const data = args[0].value,\n          dataName = DataPrefix + data;\n\n    if (!vegaUtil.hasOwnProperty(dataName, params)) {\n      try {\n        params[dataName] = scope.getData(data).tuplesRef();\n      } catch (err) {\n        // if data set does not exist, there's nothing to track\n      }\n    }\n  }\n\n  function indataVisitor(name, args, scope, params) {\n    if (args[0].type !== vegaExpression.Literal) vegaUtil.error('First argument to indata must be a string literal.');\n    if (args[1].type !== vegaExpression.Literal) vegaUtil.error('Second argument to indata must be a string literal.');\n\n    const data = args[0].value,\n          field = args[1].value,\n          indexName = IndexPrefix + field;\n\n    if (!vegaUtil.hasOwnProperty(indexName, params)) {\n      params[indexName] = scope.getData(data).indataRef(scope, field);\n    }\n  }\n\n  function scaleVisitor(name, args, scope, params) {\n    if (args[0].type === vegaExpression.Literal) {\n      // add scale dependency\n      addScaleDependency(scope, params, args[0].value);\n    } else {\n      // indirect scale lookup; add all scales as parameters\n      for (name in scope.scales) {\n        addScaleDependency(scope, params, name);\n      }\n    }\n  }\n\n  function addScaleDependency(scope, params, name) {\n    const scaleName = ScalePrefix + name;\n    if (!vegaUtil.hasOwnProperty(params, scaleName)) {\n      try {\n        params[scaleName] = scope.scaleRef(name);\n      } catch (err) {\n        // TODO: error handling? warning?\n      }\n    }\n  }\n\n  function getScale(name, ctx) {\n    let s;\n    return vegaUtil.isFunction(name) ? name\n      : vegaUtil.isString(name) ? (s = ctx.scales[name]) && s.value\n      : undefined;\n  }\n\n  function internalScaleFunctions(codegen, fnctx, visitors) {\n    // add helper method to the 'this' expression function context\n    fnctx.__bandwidth = s => s && s.bandwidth ? s.bandwidth() : 0;\n\n    // register AST visitors for internal scale functions\n    visitors._bandwidth = scaleVisitor;\n    visitors._range = scaleVisitor;\n    visitors._scale = scaleVisitor;\n\n    // resolve scale reference directly to the signal hash argument\n    const ref = arg => '_[' + (\n      arg.type === vegaExpression.Literal\n        ? vegaUtil.stringValue(ScalePrefix + arg.value)\n        : vegaUtil.stringValue(ScalePrefix) + '+' + codegen(arg)\n    ) + ']';\n\n    // define and return internal scale function code generators\n    // these internal functions are called by mark encoders\n    return {\n      _bandwidth: args => `this.__bandwidth(${ref(args[0])})`,\n      _range: args => `${ref(args[0])}.range()`,\n      _scale: args => `${ref(args[0])}(${codegen(args[1])})`\n    };\n  }\n\n  function geoMethod(methodName, globalMethod) {\n    return function(projection, geojson, group) {\n      if (projection) {\n        // projection defined, use it\n        const p = getScale(projection, (group || this).context);\n        return p && p.path[methodName](geojson);\n      } else {\n        // projection undefined, use global method\n        return globalMethod(geojson);\n      }\n    };\n  }\n\n  const geoArea = geoMethod('area', d3Geo.geoArea);\n  const geoBounds = geoMethod('bounds', d3Geo.geoBounds);\n  const geoCentroid = geoMethod('centroid', d3Geo.geoCentroid);\n\n  function inScope(item) {\n    const group = this.context.group;\n    let value = false;\n\n    if (group) while (item) {\n      if (item === group) { value = true; break; }\n      item = item.mark.group;\n    }\n    return value;\n  }\n\n  function log(df, method, args) {\n    try {\n      df[method].apply(df, ['EXPRESSION'].concat([].slice.call(args)));\n    } catch (err) {\n      df.warn(err);\n    }\n    return args[args.length-1];\n  }\n\n  function warn() {\n    return log(this.context.dataflow, 'warn', arguments);\n  }\n\n  function info() {\n    return log(this.context.dataflow, 'info', arguments);\n  }\n\n  function debug() {\n    return log(this.context.dataflow, 'debug', arguments);\n  }\n\n  // https://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n  function channel_luminance_value(channelValue) {\n    const val = channelValue / 255;\n    if (val <= 0.03928) {\n      return val / 12.92;\n    }\n    return Math.pow((val + 0.055) / 1.055, 2.4);\n  }\n\n  function luminance(color) {\n    const c = d3Color.rgb(color),\n          r = channel_luminance_value(c.r),\n          g = channel_luminance_value(c.g),\n          b = channel_luminance_value(c.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  }\n\n  // https://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n  function contrast(color1, color2) {\n    const lum1 = luminance(color1),\n          lum2 = luminance(color2),\n          lumL = Math.max(lum1, lum2),\n          lumD = Math.min(lum1, lum2);\n    return (lumL + 0.05) / (lumD + 0.05);\n  }\n\n  function merge() {\n    const args = [].slice.call(arguments);\n    args.unshift({});\n    return vegaUtil.extend.apply(null, args);\n  }\n\n  function equal(a, b) {\n    return a === b || a !== a && b !== b ? true\n      : vegaUtil.isArray(a) ? (\n          vegaUtil.isArray(b) && a.length === b.length ? equalArray(a, b) : false\n        )\n      : vegaUtil.isObject(a) && vegaUtil.isObject(b) ? equalObject(a, b)\n      : false;\n  }\n\n  function equalArray(a, b) {\n    for (let i=0, n=a.length; i<n; ++i) {\n      if (!equal(a[i], b[i])) return false;\n    }\n    return true;\n  }\n\n  function equalObject(a, b) {\n    for (const key in a) {\n      if (!equal(a[key], b[key])) return false;\n    }\n    return true;\n  }\n\n  function removePredicate(props) {\n    return _ => equalObject(props, _);\n  }\n\n  function modify(name, insert, remove, toggle, modify, values) {\n    const df = this.context.dataflow,\n          data = this.context.data[name],\n          input = data.input,\n          stamp = df.stamp();\n\n    let changes = data.changes,\n        predicate, key;\n\n    if (df._trigger === false || !(input.value.length || insert || toggle)) {\n      // nothing to do!\n      return 0;\n    }\n\n    if (!changes || changes.stamp < stamp) {\n      data.changes = (changes = df.changeset());\n      changes.stamp = stamp;\n      df.runAfter(() => {\n        data.modified = true;\n        df.pulse(input, changes).run();\n      }, true, 1);\n    }\n\n    if (remove) {\n      predicate = remove === true ? vegaUtil.truthy\n        : (vegaUtil.isArray(remove) || vegaDataflow.isTuple(remove)) ? remove\n        : removePredicate(remove);\n      changes.remove(predicate);\n    }\n\n    if (insert) {\n      changes.insert(insert);\n    }\n\n    if (toggle) {\n      predicate = removePredicate(toggle);\n      if (input.value.some(predicate)) {\n        changes.remove(predicate);\n      } else {\n        changes.insert(toggle);\n      }\n    }\n\n    if (modify) {\n      for (key in values) {\n        changes.modify(modify, key, values[key]);\n      }\n    }\n\n    return 1;\n  }\n\n  function pinchDistance(event) {\n    const t = event.touches,\n          dx = t[0].clientX - t[1].clientX,\n          dy = t[0].clientY - t[1].clientY;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  function pinchAngle(event) {\n    const t = event.touches;\n    return Math.atan2(\n      t[0].clientY - t[1].clientY,\n      t[0].clientX - t[1].clientX\n    );\n  }\n\n  function bandspace(count, paddingInner, paddingOuter) {\n    return vegaScale.bandSpace(count || 0, paddingInner || 0, paddingOuter || 0);\n  }\n\n  function bandwidth(name, group) {\n    const s = getScale(name, (group || this).context);\n    return s && s.bandwidth ? s.bandwidth() : 0;\n  }\n\n  function copy(name, group) {\n    const s = getScale(name, (group || this).context);\n    return s ? s.copy() : undefined;\n  }\n\n  function domain(name, group) {\n    const s = getScale(name, (group || this).context);\n    return s ? s.domain() : [];\n  }\n\n  function invert(name, range, group) {\n    const s = getScale(name, (group || this).context);\n    return !s ? undefined\n      : vegaUtil.isArray(range) ? (s.invertRange || s.invert)(range)\n      : (s.invert || s.invertExtent)(range);\n  }\n\n  function range(name, group) {\n    const s = getScale(name, (group || this).context);\n    return s && s.range ? s.range() : [];\n  }\n\n  function scale(name, value, group) {\n    const s = getScale(name, (group || this).context);\n    return s ? s(value) : undefined;\n  }\n\n  function scaleGradient(scale, p0, p1, count, group) {\n    scale = getScale(scale, (group || this).context);\n\n    const gradient = vegaScenegraph.Gradient(p0, p1);\n\n    let stops = scale.domain(),\n        min = stops[0],\n        max = vegaUtil.peek(stops),\n        fraction = vegaUtil.identity;\n\n    if (!(max - min)) {\n      // expand scale if domain has zero span, fix #1479\n      scale = (scale.interpolator\n        ? vegaScale.scale('sequential')().interpolator(scale.interpolator())\n        : vegaScale.scale('linear')().interpolate(scale.interpolate()).range(scale.range())\n      ).domain([min=0, max=1]);\n    } else {\n      fraction = vegaScale.scaleFraction(scale, min, max);\n    }\n\n    if (scale.ticks) {\n      stops = scale.ticks(+count || 15);\n      if (min !== stops[0]) stops.unshift(min);\n      if (max !== vegaUtil.peek(stops)) stops.push(max);\n    }\n\n    stops.forEach(_ => gradient.stop(fraction(_), scale(_)));\n\n    return gradient;\n  }\n\n  function geoShape(projection, geojson, group) {\n    const p = getScale(projection, (group || this).context);\n    return function(context) {\n      return p ? p.path.context(context)(geojson) : '';\n    };\n  }\n\n  function pathShape(path) {\n    let p = null;\n    return function(context) {\n      return context\n        ? vegaScenegraph.pathRender(context, (p = p || vegaScenegraph.pathParse(path)))\n        : path;\n    };\n  }\n\n  const datum = d => d.data;\n\n  function treeNodes(name, context) {\n    const tree = data.call(context, name);\n    return tree.root && tree.root.lookup || {};\n  }\n\n  function treePath(name, source, target) {\n    const nodes = treeNodes(name, this),\n          s = nodes[source],\n          t = nodes[target];\n    return s && t ? s.path(t).map(datum) : undefined;\n  }\n\n  function treeAncestors(name, node) {\n    const n = treeNodes(name, this)[node];\n    return n ? n.ancestors().map(datum) : undefined;\n  }\n\n  const _window = () => (typeof window !== 'undefined' && window) || null;\n\n  function screen() {\n    const w = _window();\n    return w ? w.screen : {};\n  }\n\n  function windowSize() {\n    const w = _window();\n    return w\n      ? [w.innerWidth, w.innerHeight]\n      : [undefined, undefined];\n  }\n\n  function containerSize() {\n    const view = this.context.dataflow,\n          el = view.container && view.container();\n    return el\n      ? [el.clientWidth, el.clientHeight]\n      : [undefined, undefined];\n  }\n\n  function intersect(b, opt, group) {\n    if (!b) return [];\n\n    const [u, v] = b,\n          box = new vegaScenegraph.Bounds().set(u[0], u[1], v[0], v[1]),\n          scene = group || this.context.dataflow.scenegraph().root;\n\n    return vegaScenegraph.intersect(scene, box, filter(opt));\n  }\n\n  function filter(opt) {\n    let p = null;\n\n    if (opt) {\n      const types = vegaUtil.array(opt.marktype),\n            names = vegaUtil.array(opt.markname);\n      p = _ => (!types.length || types.some(t => _.marktype === t))\n            && (!names.length || names.some(s => _.name === s));\n    }\n\n    return p;\n  }\n\n  // Expression function context object\n  const functionContext = {\n    random() { return vegaStatistics.random(); }, // override default\n    cumulativeNormal: vegaStatistics.cumulativeNormal,\n    cumulativeLogNormal: vegaStatistics.cumulativeLogNormal,\n    cumulativeUniform: vegaStatistics.cumulativeUniform,\n    densityNormal: vegaStatistics.densityNormal,\n    densityLogNormal: vegaStatistics.densityLogNormal,\n    densityUniform: vegaStatistics.densityUniform,\n    quantileNormal: vegaStatistics.quantileNormal,\n    quantileLogNormal: vegaStatistics.quantileLogNormal,\n    quantileUniform: vegaStatistics.quantileUniform,\n    sampleNormal: vegaStatistics.sampleNormal,\n    sampleLogNormal: vegaStatistics.sampleLogNormal,\n    sampleUniform: vegaStatistics.sampleUniform,\n    isArray: vegaUtil.isArray,\n    isBoolean: vegaUtil.isBoolean,\n    isDate: vegaUtil.isDate,\n    isDefined(_) { return _ !== undefined; },\n    isNumber: vegaUtil.isNumber,\n    isObject: vegaUtil.isObject,\n    isRegExp: vegaUtil.isRegExp,\n    isString: vegaUtil.isString,\n    isTuple: vegaDataflow.isTuple,\n    isValid(_) { return _ != null && _ === _; },\n    toBoolean: vegaUtil.toBoolean,\n    toDate: vegaUtil.toDate,\n    toNumber: vegaUtil.toNumber,\n    toString: vegaUtil.toString,\n    flush: vegaUtil.flush,\n    lerp: vegaUtil.lerp,\n    merge,\n    pad: vegaUtil.pad,\n    peek: vegaUtil.peek,\n    span: vegaUtil.span,\n    inrange: vegaUtil.inrange,\n    truncate: vegaUtil.truncate,\n    rgb: d3Color.rgb,\n    lab: d3Color.lab,\n    hcl: d3Color.hcl,\n    hsl: d3Color.hsl,\n    luminance,\n    contrast,\n    sequence: d3Array.range,\n    format,\n    utcFormat,\n    utcParse,\n    utcOffset: vegaTime.utcOffset,\n    utcSequence: vegaTime.utcSequence,\n    timeFormat,\n    timeParse,\n    timeOffset: vegaTime.timeOffset,\n    timeSequence: vegaTime.timeSequence,\n    timeUnitSpecifier: vegaTime.timeUnitSpecifier,\n    monthFormat,\n    monthAbbrevFormat,\n    dayFormat,\n    dayAbbrevFormat,\n    quarter: vegaUtil.quarter,\n    utcquarter: vegaUtil.utcquarter,\n    week: vegaTime.week,\n    utcweek: vegaTime.utcweek,\n    dayofyear: vegaTime.dayofyear,\n    utcdayofyear: vegaTime.utcdayofyear,\n    warn,\n    info,\n    debug,\n    extent: vegaUtil.extent,\n    inScope,\n    intersect,\n    clampRange: vegaUtil.clampRange,\n    pinchDistance,\n    pinchAngle,\n    screen,\n    containerSize,\n    windowSize,\n    bandspace,\n    setdata,\n    pathShape,\n    panLinear: vegaUtil.panLinear,\n    panLog: vegaUtil.panLog,\n    panPow: vegaUtil.panPow,\n    panSymlog: vegaUtil.panSymlog,\n    zoomLinear: vegaUtil.zoomLinear,\n    zoomLog: vegaUtil.zoomLog,\n    zoomPow: vegaUtil.zoomPow,\n    zoomSymlog: vegaUtil.zoomSymlog,\n    encode,\n    modify\n  };\n\n  const eventFunctions = ['view', 'item', 'group', 'xy', 'x', 'y'], // event functions\n        eventPrefix = 'event.vega.', // event function prefix\n        thisPrefix = 'this.', // function context prefix\n        astVisitors = {}; // AST visitors for dependency analysis\n\n  // export code generator parameters\n  const codegenParams = {\n    blacklist:  ['_'],\n    whitelist:  ['datum', 'event', 'item'],\n    fieldvar:   'datum',\n    globalvar:  id => `_[${vegaUtil.stringValue(SignalPrefix + id)}]`,\n    functions:  buildFunctions,\n    constants:  vegaExpression.constants,\n    visitors:   astVisitors\n  };\n\n  // export code generator\n  const codeGenerator = vegaExpression.codegen(codegenParams);\n\n  // Build expression function registry\n  function buildFunctions(codegen) {\n    const fn = vegaExpression.functions(codegen);\n    eventFunctions.forEach(name => fn[name] = eventPrefix + name);\n    for (const name in functionContext) { fn[name] = thisPrefix + name; }\n    vegaUtil.extend(fn, internalScaleFunctions(codegen, functionContext, astVisitors));\n    return fn;\n  }\n\n  // Register an expression function\n  function expressionFunction(name, fn, visitor) {\n    if (arguments.length === 1) {\n      return functionContext[name];\n    }\n\n    // register with the functionContext\n    functionContext[name] = fn;\n\n    // if there is an astVisitor register that, too\n    if (visitor) astVisitors[name] = visitor;\n\n    // if the code generator has already been initialized,\n    // we need to also register the function with it\n    if (codeGenerator) codeGenerator.functions[name] = thisPrefix + name;\n    return this;\n  }\n\n  // register expression functions with ast visitors\n  expressionFunction('bandwidth', bandwidth, scaleVisitor);\n  expressionFunction('copy', copy, scaleVisitor);\n  expressionFunction('domain', domain, scaleVisitor);\n  expressionFunction('range', range, scaleVisitor);\n  expressionFunction('invert', invert, scaleVisitor);\n  expressionFunction('scale', scale, scaleVisitor);\n  expressionFunction('gradient', scaleGradient, scaleVisitor);\n  expressionFunction('geoArea', geoArea, scaleVisitor);\n  expressionFunction('geoBounds', geoBounds, scaleVisitor);\n  expressionFunction('geoCentroid', geoCentroid, scaleVisitor);\n  expressionFunction('geoShape', geoShape, scaleVisitor);\n  expressionFunction('indata', indata, indataVisitor);\n  expressionFunction('data', data, dataVisitor);\n  expressionFunction('treePath', treePath, dataVisitor);\n  expressionFunction('treeAncestors', treeAncestors, dataVisitor);\n\n  // register Vega-Lite selection functions\n  expressionFunction('vlSelectionTest', vegaSelections.selectionTest, vegaSelections.selectionVisitor);\n  expressionFunction('vlSelectionResolve', vegaSelections.selectionResolve, vegaSelections.selectionVisitor);\n\n  function parser(expr, scope) {\n    const params = {};\n\n    // parse the expression to an abstract syntax tree (ast)\n    let ast;\n    try {\n      expr = vegaUtil.isString(expr) ? expr : (vegaUtil.stringValue(expr) + '');\n      ast = vegaExpression.parse(expr);\n    } catch (err) {\n      vegaUtil.error('Expression parse error: ' + expr);\n    }\n\n    // analyze ast function calls for dependencies\n    ast.visit(node => {\n      if (node.type !== vegaExpression.CallExpression) return;\n      const name = node.callee.name,\n            visit = codegenParams.visitors[name];\n      if (visit) visit(name, node.arguments, scope, params);\n    });\n\n    // perform code generation\n    const gen = codeGenerator(ast);\n\n    // collect signal dependencies\n    gen.globals.forEach(name => {\n      const signalName = SignalPrefix + name;\n      if (!vegaUtil.hasOwnProperty(params, signalName) && scope.getSignal(name)) {\n        params[signalName] = scope.signalRef(name);\n      }\n    });\n\n    // return generated expression code and dependencies\n    return {\n      $expr:   vegaUtil.extend({code: gen.code}, scope.options.ast ? {ast} : null),\n      $fields: gen.fields,\n      $params: params\n    };\n  }\n\n  exports.DataPrefix = DataPrefix;\n  exports.IndexPrefix = IndexPrefix;\n  exports.ScalePrefix = ScalePrefix;\n  exports.SignalPrefix = SignalPrefix;\n  exports.bandspace = bandspace;\n  exports.bandwidth = bandwidth;\n  exports.codeGenerator = codeGenerator;\n  exports.codegenParams = codegenParams;\n  exports.containerSize = containerSize;\n  exports.contrast = contrast;\n  exports.copy = copy;\n  exports.data = data;\n  exports.dataVisitor = dataVisitor;\n  exports.dayAbbrevFormat = dayAbbrevFormat;\n  exports.dayFormat = dayFormat;\n  exports.debug = debug;\n  exports.domain = domain;\n  exports.encode = encode;\n  exports.expressionFunction = expressionFunction;\n  exports.format = format;\n  exports.functionContext = functionContext;\n  exports.geoArea = geoArea;\n  exports.geoBounds = geoBounds;\n  exports.geoCentroid = geoCentroid;\n  exports.geoShape = geoShape;\n  exports.inScope = inScope;\n  exports.indata = indata;\n  exports.indataVisitor = indataVisitor;\n  exports.info = info;\n  exports.invert = invert;\n  exports.luminance = luminance;\n  exports.merge = merge;\n  exports.modify = modify;\n  exports.monthAbbrevFormat = monthAbbrevFormat;\n  exports.monthFormat = monthFormat;\n  exports.parseExpression = parser;\n  exports.pathShape = pathShape;\n  exports.pinchAngle = pinchAngle;\n  exports.pinchDistance = pinchDistance;\n  exports.range = range;\n  exports.scale = scale;\n  exports.scaleGradient = scaleGradient;\n  exports.scaleVisitor = scaleVisitor;\n  exports.screen = screen;\n  exports.setdata = setdata;\n  exports.timeFormat = timeFormat;\n  exports.timeParse = timeParse;\n  exports.treeAncestors = treeAncestors;\n  exports.treePath = treePath;\n  exports.utcFormat = utcFormat;\n  exports.utcParse = utcParse;\n  exports.warn = warn;\n  exports.windowSize = windowSize;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$vega_time$build$vega_time","~$module$node_modules$vega_dataflow$build$vega_dataflow","~$module$node_modules$vega_scale$build$vega_scale","~$module$node_modules$vega_expression$build$vega_expression","~$module$node_modules$d3_color$dist$d3_color","~$shadow.js","~$module$node_modules$vega_scenegraph$build$vega_scenegraph","~$module$node_modules$vega_statistics$build$vega_statistics","~$module$node_modules$d3_geo$dist$d3_geo","~$module$node_modules$vega_selections$build$vega_selections","~$module$node_modules$vega_util$build$vega_util","~$module$node_modules$d3_array$dist$d3_array"]],"~:properties",["^5",["_scale","treeAncestors","quantileLogNormal","constants","codeGenerator","lab","cumulativeNormal","range","peek","random","isNumber","dayofyear","windowSize","geoBounds","invert","inScope","globalvar","utcquarter","pad","densityUniform","rgb","copy","$params","pinchDistance","isArray","geoShape","scale","timeUnitSpecifier","densityLogNormal","toDate","sampleNormal","intersect","treePath","bandwidth","fieldvar","cumulativeLogNormal","scaleVisitor","__esModule","dayAbbrevFormat","info","warn","$fields","timeParse","timeSequence","inrange","whitelist","lerp","hsl","flush","$expr","toString","screen","DataPrefix","vega","containerSize","_bandwidth","pinchAngle","pathShape","indataVisitor","sampleLogNormal","panLog","quantileNormal","expressionFunction","isObject","panSymlog","sequence","__bandwidth","value","modify","clampRange","span","contrast","functionContext","sampleUniform","dataVisitor","utcParse","panLinear","debug","densityNormal","bandspace","geoArea","zoomLinear","utcSequence","changes","blacklist","week","panPow","domain","functions","utcdayofyear","isTuple","toBoolean","truncate","stamp","quarter","isValid","zoomPow","geoCentroid","scaleGradient","cumulativeUniform","utcFormat","utcOffset","modified","indata","parseExpression","SignalPrefix","zoomSymlog","IndexPrefix","visitors","toNumber","isDefined","monthFormat","isRegExp","dayFormat","utcweek","_range","codegenParams","ast","data","merge","extent","ScalePrefix","encode","monthAbbrevFormat","isDate","setdata","code","zoomLog","timeOffset","format","isBoolean","quantileUniform","isString","luminance","timeFormat","hcl"]],"~:compiled-at",1600144480022,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$vega_functions$build$vega_functions.js\",\n\"lineCount\":34,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/vega-functions/build/vega-functions.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$vega_functions$build$vega_functions\\\"] = function(global,require,module,exports) {\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-expression'), require('d3-geo'), require('d3-color'), require('vega-dataflow'), require('vega-scale'), require('vega-scenegraph'), require('vega-selections'), require('vega-statistics'), require('vega-time'), require('d3-array')) :\\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-expression', 'd3-geo', 'd3-color', 'vega-dataflow', 'vega-scale', 'vega-scenegraph', 'vega-selections', 'vega-statistics', 'vega-time', 'd3-array'], factory) :\\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.d3, global.d3, global.vega, global.vega, global.vega, global.vega, global.vega, global.vega, global.d3));\\n}(this, (function (exports, vegaUtil, vegaExpression, d3Geo, d3Color, vegaDataflow, vegaScale, vegaScenegraph, vegaSelections, vegaStatistics, vegaTime, d3Array) { 'use strict';\\n\\n  function data(name) {\\n    const data = this.context.data[name];\\n    return data ? data.values.value : [];\\n  }\\n\\n  function indata(name, field, value) {\\n    const index = this.context.data[name]['index:' + field],\\n          entry = index ? index.value.get(value) : undefined;\\n    return entry ? entry.count : entry;\\n  }\\n\\n  function setdata(name, tuples) {\\n    const df = this.context.dataflow,\\n          data = this.context.data[name],\\n          input = data.input;\\n\\n    df.pulse(input, df.changeset().remove(vegaUtil.truthy).insert(tuples));\\n    return 1;\\n  }\\n\\n  function encode(item, name, retval) {\\n    if (item) {\\n      const df = this.context.dataflow,\\n            target = item.mark.source;\\n      df.pulse(target, df.changeset().encode(item, name));\\n    }\\n    return retval !== undefined ? retval : item;\\n  }\\n\\n  const wrap = method => function(value, spec) {\\n    const locale = this.context.dataflow.locale();\\n    return locale[method](spec)(value);\\n  };\\n\\n  const format = wrap('format');\\n  const timeFormat = wrap('timeFormat');\\n  const utcFormat = wrap('utcFormat');\\n  const timeParse = wrap('timeParse');\\n  const utcParse = wrap('utcParse');\\n\\n  const dateObj = new Date(2000, 0, 1);\\n\\n  function time(month, day, specifier) {\\n    if (!Number.isInteger(month) || !Number.isInteger(day)) return '';\\n    dateObj.setYear(2000);\\n    dateObj.setMonth(month);\\n    dateObj.setDate(day);\\n    return timeFormat.call(this, dateObj, specifier);\\n  }\\n\\n  function monthFormat(month) {\\n    return time.call(this, month, 1, '%B');\\n  }\\n\\n  function monthAbbrevFormat(month) {\\n    return time.call(this, month, 1, '%b');\\n  }\\n\\n  function dayFormat(day) {\\n    return time.call(this, 0, 2 + day, '%A');\\n  }\\n\\n  function dayAbbrevFormat(day) {\\n    return time.call(this, 0, 2 + day, '%a');\\n  }\\n\\n  const DataPrefix   = ':';\\n  const IndexPrefix  = '@';\\n  const ScalePrefix  = '%';\\n  const SignalPrefix = '$';\\n\\n  function dataVisitor(name, args, scope, params) {\\n    if (args[0].type !== vegaExpression.Literal) {\\n      vegaUtil.error('First argument to data functions must be a string literal.');\\n    }\\n\\n    const data = args[0].value,\\n          dataName = DataPrefix + data;\\n\\n    if (!vegaUtil.hasOwnProperty(dataName, params)) {\\n      try {\\n        params[dataName] = scope.getData(data).tuplesRef();\\n      } catch (err) {\\n        // if data set does not exist, there's nothing to track\\n      }\\n    }\\n  }\\n\\n  function indataVisitor(name, args, scope, params) {\\n    if (args[0].type !== vegaExpression.Literal) vegaUtil.error('First argument to indata must be a string literal.');\\n    if (args[1].type !== vegaExpression.Literal) vegaUtil.error('Second argument to indata must be a string literal.');\\n\\n    const data = args[0].value,\\n          field = args[1].value,\\n          indexName = IndexPrefix + field;\\n\\n    if (!vegaUtil.hasOwnProperty(indexName, params)) {\\n      params[indexName] = scope.getData(data).indataRef(scope, field);\\n    }\\n  }\\n\\n  function scaleVisitor(name, args, scope, params) {\\n    if (args[0].type === vegaExpression.Literal) {\\n      // add scale dependency\\n      addScaleDependency(scope, params, args[0].value);\\n    } else {\\n      // indirect scale lookup; add all scales as parameters\\n      for (name in scope.scales) {\\n        addScaleDependency(scope, params, name);\\n      }\\n    }\\n  }\\n\\n  function addScaleDependency(scope, params, name) {\\n    const scaleName = ScalePrefix + name;\\n    if (!vegaUtil.hasOwnProperty(params, scaleName)) {\\n      try {\\n        params[scaleName] = scope.scaleRef(name);\\n      } catch (err) {\\n        // TODO: error handling? warning?\\n      }\\n    }\\n  }\\n\\n  function getScale(name, ctx) {\\n    let s;\\n    return vegaUtil.isFunction(name) ? name\\n      : vegaUtil.isString(name) ? (s = ctx.scales[name]) && s.value\\n      : undefined;\\n  }\\n\\n  function internalScaleFunctions(codegen, fnctx, visitors) {\\n    // add helper method to the 'this' expression function context\\n    fnctx.__bandwidth = s => s && s.bandwidth ? s.bandwidth() : 0;\\n\\n    // register AST visitors for internal scale functions\\n    visitors._bandwidth = scaleVisitor;\\n    visitors._range = scaleVisitor;\\n    visitors._scale = scaleVisitor;\\n\\n    // resolve scale reference directly to the signal hash argument\\n    const ref = arg => '_[' + (\\n      arg.type === vegaExpression.Literal\\n        ? vegaUtil.stringValue(ScalePrefix + arg.value)\\n        : vegaUtil.stringValue(ScalePrefix) + '+' + codegen(arg)\\n    ) + ']';\\n\\n    // define and return internal scale function code generators\\n    // these internal functions are called by mark encoders\\n    return {\\n      _bandwidth: args => `this.__bandwidth(${ref(args[0])})`,\\n      _range: args => `${ref(args[0])}.range()`,\\n      _scale: args => `${ref(args[0])}(${codegen(args[1])})`\\n    };\\n  }\\n\\n  function geoMethod(methodName, globalMethod) {\\n    return function(projection, geojson, group) {\\n      if (projection) {\\n        // projection defined, use it\\n        const p = getScale(projection, (group || this).context);\\n        return p && p.path[methodName](geojson);\\n      } else {\\n        // projection undefined, use global method\\n        return globalMethod(geojson);\\n      }\\n    };\\n  }\\n\\n  const geoArea = geoMethod('area', d3Geo.geoArea);\\n  const geoBounds = geoMethod('bounds', d3Geo.geoBounds);\\n  const geoCentroid = geoMethod('centroid', d3Geo.geoCentroid);\\n\\n  function inScope(item) {\\n    const group = this.context.group;\\n    let value = false;\\n\\n    if (group) while (item) {\\n      if (item === group) { value = true; break; }\\n      item = item.mark.group;\\n    }\\n    return value;\\n  }\\n\\n  function log(df, method, args) {\\n    try {\\n      df[method].apply(df, ['EXPRESSION'].concat([].slice.call(args)));\\n    } catch (err) {\\n      df.warn(err);\\n    }\\n    return args[args.length-1];\\n  }\\n\\n  function warn() {\\n    return log(this.context.dataflow, 'warn', arguments);\\n  }\\n\\n  function info() {\\n    return log(this.context.dataflow, 'info', arguments);\\n  }\\n\\n  function debug() {\\n    return log(this.context.dataflow, 'debug', arguments);\\n  }\\n\\n  // https://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\\n  function channel_luminance_value(channelValue) {\\n    const val = channelValue / 255;\\n    if (val <= 0.03928) {\\n      return val / 12.92;\\n    }\\n    return Math.pow((val + 0.055) / 1.055, 2.4);\\n  }\\n\\n  function luminance(color) {\\n    const c = d3Color.rgb(color),\\n          r = channel_luminance_value(c.r),\\n          g = channel_luminance_value(c.g),\\n          b = channel_luminance_value(c.b);\\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\\n  }\\n\\n  // https://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\\n  function contrast(color1, color2) {\\n    const lum1 = luminance(color1),\\n          lum2 = luminance(color2),\\n          lumL = Math.max(lum1, lum2),\\n          lumD = Math.min(lum1, lum2);\\n    return (lumL + 0.05) / (lumD + 0.05);\\n  }\\n\\n  function merge() {\\n    const args = [].slice.call(arguments);\\n    args.unshift({});\\n    return vegaUtil.extend.apply(null, args);\\n  }\\n\\n  function equal(a, b) {\\n    return a === b || a !== a && b !== b ? true\\n      : vegaUtil.isArray(a) ? (\\n          vegaUtil.isArray(b) && a.length === b.length ? equalArray(a, b) : false\\n        )\\n      : vegaUtil.isObject(a) && vegaUtil.isObject(b) ? equalObject(a, b)\\n      : false;\\n  }\\n\\n  function equalArray(a, b) {\\n    for (let i=0, n=a.length; i<n; ++i) {\\n      if (!equal(a[i], b[i])) return false;\\n    }\\n    return true;\\n  }\\n\\n  function equalObject(a, b) {\\n    for (const key in a) {\\n      if (!equal(a[key], b[key])) return false;\\n    }\\n    return true;\\n  }\\n\\n  function removePredicate(props) {\\n    return _ => equalObject(props, _);\\n  }\\n\\n  function modify(name, insert, remove, toggle, modify, values) {\\n    const df = this.context.dataflow,\\n          data = this.context.data[name],\\n          input = data.input,\\n          stamp = df.stamp();\\n\\n    let changes = data.changes,\\n        predicate, key;\\n\\n    if (df._trigger === false || !(input.value.length || insert || toggle)) {\\n      // nothing to do!\\n      return 0;\\n    }\\n\\n    if (!changes || changes.stamp < stamp) {\\n      data.changes = (changes = df.changeset());\\n      changes.stamp = stamp;\\n      df.runAfter(() => {\\n        data.modified = true;\\n        df.pulse(input, changes).run();\\n      }, true, 1);\\n    }\\n\\n    if (remove) {\\n      predicate = remove === true ? vegaUtil.truthy\\n        : (vegaUtil.isArray(remove) || vegaDataflow.isTuple(remove)) ? remove\\n        : removePredicate(remove);\\n      changes.remove(predicate);\\n    }\\n\\n    if (insert) {\\n      changes.insert(insert);\\n    }\\n\\n    if (toggle) {\\n      predicate = removePredicate(toggle);\\n      if (input.value.some(predicate)) {\\n        changes.remove(predicate);\\n      } else {\\n        changes.insert(toggle);\\n      }\\n    }\\n\\n    if (modify) {\\n      for (key in values) {\\n        changes.modify(modify, key, values[key]);\\n      }\\n    }\\n\\n    return 1;\\n  }\\n\\n  function pinchDistance(event) {\\n    const t = event.touches,\\n          dx = t[0].clientX - t[1].clientX,\\n          dy = t[0].clientY - t[1].clientY;\\n    return Math.sqrt(dx * dx + dy * dy);\\n  }\\n\\n  function pinchAngle(event) {\\n    const t = event.touches;\\n    return Math.atan2(\\n      t[0].clientY - t[1].clientY,\\n      t[0].clientX - t[1].clientX\\n    );\\n  }\\n\\n  function bandspace(count, paddingInner, paddingOuter) {\\n    return vegaScale.bandSpace(count || 0, paddingInner || 0, paddingOuter || 0);\\n  }\\n\\n  function bandwidth(name, group) {\\n    const s = getScale(name, (group || this).context);\\n    return s && s.bandwidth ? s.bandwidth() : 0;\\n  }\\n\\n  function copy(name, group) {\\n    const s = getScale(name, (group || this).context);\\n    return s ? s.copy() : undefined;\\n  }\\n\\n  function domain(name, group) {\\n    const s = getScale(name, (group || this).context);\\n    return s ? s.domain() : [];\\n  }\\n\\n  function invert(name, range, group) {\\n    const s = getScale(name, (group || this).context);\\n    return !s ? undefined\\n      : vegaUtil.isArray(range) ? (s.invertRange || s.invert)(range)\\n      : (s.invert || s.invertExtent)(range);\\n  }\\n\\n  function range(name, group) {\\n    const s = getScale(name, (group || this).context);\\n    return s && s.range ? s.range() : [];\\n  }\\n\\n  function scale(name, value, group) {\\n    const s = getScale(name, (group || this).context);\\n    return s ? s(value) : undefined;\\n  }\\n\\n  function scaleGradient(scale, p0, p1, count, group) {\\n    scale = getScale(scale, (group || this).context);\\n\\n    const gradient = vegaScenegraph.Gradient(p0, p1);\\n\\n    let stops = scale.domain(),\\n        min = stops[0],\\n        max = vegaUtil.peek(stops),\\n        fraction = vegaUtil.identity;\\n\\n    if (!(max - min)) {\\n      // expand scale if domain has zero span, fix #1479\\n      scale = (scale.interpolator\\n        ? vegaScale.scale('sequential')().interpolator(scale.interpolator())\\n        : vegaScale.scale('linear')().interpolate(scale.interpolate()).range(scale.range())\\n      ).domain([min=0, max=1]);\\n    } else {\\n      fraction = vegaScale.scaleFraction(scale, min, max);\\n    }\\n\\n    if (scale.ticks) {\\n      stops = scale.ticks(+count || 15);\\n      if (min !== stops[0]) stops.unshift(min);\\n      if (max !== vegaUtil.peek(stops)) stops.push(max);\\n    }\\n\\n    stops.forEach(_ => gradient.stop(fraction(_), scale(_)));\\n\\n    return gradient;\\n  }\\n\\n  function geoShape(projection, geojson, group) {\\n    const p = getScale(projection, (group || this).context);\\n    return function(context) {\\n      return p ? p.path.context(context)(geojson) : '';\\n    };\\n  }\\n\\n  function pathShape(path) {\\n    let p = null;\\n    return function(context) {\\n      return context\\n        ? vegaScenegraph.pathRender(context, (p = p || vegaScenegraph.pathParse(path)))\\n        : path;\\n    };\\n  }\\n\\n  const datum = d => d.data;\\n\\n  function treeNodes(name, context) {\\n    const tree = data.call(context, name);\\n    return tree.root && tree.root.lookup || {};\\n  }\\n\\n  function treePath(name, source, target) {\\n    const nodes = treeNodes(name, this),\\n          s = nodes[source],\\n          t = nodes[target];\\n    return s && t ? s.path(t).map(datum) : undefined;\\n  }\\n\\n  function treeAncestors(name, node) {\\n    const n = treeNodes(name, this)[node];\\n    return n ? n.ancestors().map(datum) : undefined;\\n  }\\n\\n  const _window = () => (typeof window !== 'undefined' && window) || null;\\n\\n  function screen() {\\n    const w = _window();\\n    return w ? w.screen : {};\\n  }\\n\\n  function windowSize() {\\n    const w = _window();\\n    return w\\n      ? [w.innerWidth, w.innerHeight]\\n      : [undefined, undefined];\\n  }\\n\\n  function containerSize() {\\n    const view = this.context.dataflow,\\n          el = view.container && view.container();\\n    return el\\n      ? [el.clientWidth, el.clientHeight]\\n      : [undefined, undefined];\\n  }\\n\\n  function intersect(b, opt, group) {\\n    if (!b) return [];\\n\\n    const [u, v] = b,\\n          box = new vegaScenegraph.Bounds().set(u[0], u[1], v[0], v[1]),\\n          scene = group || this.context.dataflow.scenegraph().root;\\n\\n    return vegaScenegraph.intersect(scene, box, filter(opt));\\n  }\\n\\n  function filter(opt) {\\n    let p = null;\\n\\n    if (opt) {\\n      const types = vegaUtil.array(opt.marktype),\\n            names = vegaUtil.array(opt.markname);\\n      p = _ => (!types.length || types.some(t => _.marktype === t))\\n            && (!names.length || names.some(s => _.name === s));\\n    }\\n\\n    return p;\\n  }\\n\\n  // Expression function context object\\n  const functionContext = {\\n    random() { return vegaStatistics.random(); }, // override default\\n    cumulativeNormal: vegaStatistics.cumulativeNormal,\\n    cumulativeLogNormal: vegaStatistics.cumulativeLogNormal,\\n    cumulativeUniform: vegaStatistics.cumulativeUniform,\\n    densityNormal: vegaStatistics.densityNormal,\\n    densityLogNormal: vegaStatistics.densityLogNormal,\\n    densityUniform: vegaStatistics.densityUniform,\\n    quantileNormal: vegaStatistics.quantileNormal,\\n    quantileLogNormal: vegaStatistics.quantileLogNormal,\\n    quantileUniform: vegaStatistics.quantileUniform,\\n    sampleNormal: vegaStatistics.sampleNormal,\\n    sampleLogNormal: vegaStatistics.sampleLogNormal,\\n    sampleUniform: vegaStatistics.sampleUniform,\\n    isArray: vegaUtil.isArray,\\n    isBoolean: vegaUtil.isBoolean,\\n    isDate: vegaUtil.isDate,\\n    isDefined(_) { return _ !== undefined; },\\n    isNumber: vegaUtil.isNumber,\\n    isObject: vegaUtil.isObject,\\n    isRegExp: vegaUtil.isRegExp,\\n    isString: vegaUtil.isString,\\n    isTuple: vegaDataflow.isTuple,\\n    isValid(_) { return _ != null && _ === _; },\\n    toBoolean: vegaUtil.toBoolean,\\n    toDate: vegaUtil.toDate,\\n    toNumber: vegaUtil.toNumber,\\n    toString: vegaUtil.toString,\\n    flush: vegaUtil.flush,\\n    lerp: vegaUtil.lerp,\\n    merge,\\n    pad: vegaUtil.pad,\\n    peek: vegaUtil.peek,\\n    span: vegaUtil.span,\\n    inrange: vegaUtil.inrange,\\n    truncate: vegaUtil.truncate,\\n    rgb: d3Color.rgb,\\n    lab: d3Color.lab,\\n    hcl: d3Color.hcl,\\n    hsl: d3Color.hsl,\\n    luminance,\\n    contrast,\\n    sequence: d3Array.range,\\n    format,\\n    utcFormat,\\n    utcParse,\\n    utcOffset: vegaTime.utcOffset,\\n    utcSequence: vegaTime.utcSequence,\\n    timeFormat,\\n    timeParse,\\n    timeOffset: vegaTime.timeOffset,\\n    timeSequence: vegaTime.timeSequence,\\n    timeUnitSpecifier: vegaTime.timeUnitSpecifier,\\n    monthFormat,\\n    monthAbbrevFormat,\\n    dayFormat,\\n    dayAbbrevFormat,\\n    quarter: vegaUtil.quarter,\\n    utcquarter: vegaUtil.utcquarter,\\n    week: vegaTime.week,\\n    utcweek: vegaTime.utcweek,\\n    dayofyear: vegaTime.dayofyear,\\n    utcdayofyear: vegaTime.utcdayofyear,\\n    warn,\\n    info,\\n    debug,\\n    extent: vegaUtil.extent,\\n    inScope,\\n    intersect,\\n    clampRange: vegaUtil.clampRange,\\n    pinchDistance,\\n    pinchAngle,\\n    screen,\\n    containerSize,\\n    windowSize,\\n    bandspace,\\n    setdata,\\n    pathShape,\\n    panLinear: vegaUtil.panLinear,\\n    panLog: vegaUtil.panLog,\\n    panPow: vegaUtil.panPow,\\n    panSymlog: vegaUtil.panSymlog,\\n    zoomLinear: vegaUtil.zoomLinear,\\n    zoomLog: vegaUtil.zoomLog,\\n    zoomPow: vegaUtil.zoomPow,\\n    zoomSymlog: vegaUtil.zoomSymlog,\\n    encode,\\n    modify\\n  };\\n\\n  const eventFunctions = ['view', 'item', 'group', 'xy', 'x', 'y'], // event functions\\n        eventPrefix = 'event.vega.', // event function prefix\\n        thisPrefix = 'this.', // function context prefix\\n        astVisitors = {}; // AST visitors for dependency analysis\\n\\n  // export code generator parameters\\n  const codegenParams = {\\n    blacklist:  ['_'],\\n    whitelist:  ['datum', 'event', 'item'],\\n    fieldvar:   'datum',\\n    globalvar:  id => `_[${vegaUtil.stringValue(SignalPrefix + id)}]`,\\n    functions:  buildFunctions,\\n    constants:  vegaExpression.constants,\\n    visitors:   astVisitors\\n  };\\n\\n  // export code generator\\n  const codeGenerator = vegaExpression.codegen(codegenParams);\\n\\n  // Build expression function registry\\n  function buildFunctions(codegen) {\\n    const fn = vegaExpression.functions(codegen);\\n    eventFunctions.forEach(name => fn[name] = eventPrefix + name);\\n    for (const name in functionContext) { fn[name] = thisPrefix + name; }\\n    vegaUtil.extend(fn, internalScaleFunctions(codegen, functionContext, astVisitors));\\n    return fn;\\n  }\\n\\n  // Register an expression function\\n  function expressionFunction(name, fn, visitor) {\\n    if (arguments.length === 1) {\\n      return functionContext[name];\\n    }\\n\\n    // register with the functionContext\\n    functionContext[name] = fn;\\n\\n    // if there is an astVisitor register that, too\\n    if (visitor) astVisitors[name] = visitor;\\n\\n    // if the code generator has already been initialized,\\n    // we need to also register the function with it\\n    if (codeGenerator) codeGenerator.functions[name] = thisPrefix + name;\\n    return this;\\n  }\\n\\n  // register expression functions with ast visitors\\n  expressionFunction('bandwidth', bandwidth, scaleVisitor);\\n  expressionFunction('copy', copy, scaleVisitor);\\n  expressionFunction('domain', domain, scaleVisitor);\\n  expressionFunction('range', range, scaleVisitor);\\n  expressionFunction('invert', invert, scaleVisitor);\\n  expressionFunction('scale', scale, scaleVisitor);\\n  expressionFunction('gradient', scaleGradient, scaleVisitor);\\n  expressionFunction('geoArea', geoArea, scaleVisitor);\\n  expressionFunction('geoBounds', geoBounds, scaleVisitor);\\n  expressionFunction('geoCentroid', geoCentroid, scaleVisitor);\\n  expressionFunction('geoShape', geoShape, scaleVisitor);\\n  expressionFunction('indata', indata, indataVisitor);\\n  expressionFunction('data', data, dataVisitor);\\n  expressionFunction('treePath', treePath, dataVisitor);\\n  expressionFunction('treeAncestors', treeAncestors, dataVisitor);\\n\\n  // register Vega-Lite selection functions\\n  expressionFunction('vlSelectionTest', vegaSelections.selectionTest, vegaSelections.selectionVisitor);\\n  expressionFunction('vlSelectionResolve', vegaSelections.selectionResolve, vegaSelections.selectionVisitor);\\n\\n  function parser(expr, scope) {\\n    const params = {};\\n\\n    // parse the expression to an abstract syntax tree (ast)\\n    let ast;\\n    try {\\n      expr = vegaUtil.isString(expr) ? expr : (vegaUtil.stringValue(expr) + '');\\n      ast = vegaExpression.parse(expr);\\n    } catch (err) {\\n      vegaUtil.error('Expression parse error: ' + expr);\\n    }\\n\\n    // analyze ast function calls for dependencies\\n    ast.visit(node => {\\n      if (node.type !== vegaExpression.CallExpression) return;\\n      const name = node.callee.name,\\n            visit = codegenParams.visitors[name];\\n      if (visit) visit(name, node.arguments, scope, params);\\n    });\\n\\n    // perform code generation\\n    const gen = codeGenerator(ast);\\n\\n    // collect signal dependencies\\n    gen.globals.forEach(name => {\\n      const signalName = SignalPrefix + name;\\n      if (!vegaUtil.hasOwnProperty(params, signalName) && scope.getSignal(name)) {\\n        params[signalName] = scope.signalRef(name);\\n      }\\n    });\\n\\n    // return generated expression code and dependencies\\n    return {\\n      $expr:   vegaUtil.extend({code: gen.code}, scope.options.ast ? {ast} : null),\\n      $fields: gen.fields,\\n      $params: params\\n    };\\n  }\\n\\n  exports.DataPrefix = DataPrefix;\\n  exports.IndexPrefix = IndexPrefix;\\n  exports.ScalePrefix = ScalePrefix;\\n  exports.SignalPrefix = SignalPrefix;\\n  exports.bandspace = bandspace;\\n  exports.bandwidth = bandwidth;\\n  exports.codeGenerator = codeGenerator;\\n  exports.codegenParams = codegenParams;\\n  exports.containerSize = containerSize;\\n  exports.contrast = contrast;\\n  exports.copy = copy;\\n  exports.data = data;\\n  exports.dataVisitor = dataVisitor;\\n  exports.dayAbbrevFormat = dayAbbrevFormat;\\n  exports.dayFormat = dayFormat;\\n  exports.debug = debug;\\n  exports.domain = domain;\\n  exports.encode = encode;\\n  exports.expressionFunction = expressionFunction;\\n  exports.format = format;\\n  exports.functionContext = functionContext;\\n  exports.geoArea = geoArea;\\n  exports.geoBounds = geoBounds;\\n  exports.geoCentroid = geoCentroid;\\n  exports.geoShape = geoShape;\\n  exports.inScope = inScope;\\n  exports.indata = indata;\\n  exports.indataVisitor = indataVisitor;\\n  exports.info = info;\\n  exports.invert = invert;\\n  exports.luminance = luminance;\\n  exports.merge = merge;\\n  exports.modify = modify;\\n  exports.monthAbbrevFormat = monthAbbrevFormat;\\n  exports.monthFormat = monthFormat;\\n  exports.parseExpression = parser;\\n  exports.pathShape = pathShape;\\n  exports.pinchAngle = pinchAngle;\\n  exports.pinchDistance = pinchDistance;\\n  exports.range = range;\\n  exports.scale = scale;\\n  exports.scaleGradient = scaleGradient;\\n  exports.scaleVisitor = scaleVisitor;\\n  exports.screen = screen;\\n  exports.setdata = setdata;\\n  exports.timeFormat = timeFormat;\\n  exports.timeParse = timeParse;\\n  exports.treeAncestors = treeAncestors;\\n  exports.treePath = treePath;\\n  exports.utcFormat = utcFormat;\\n  exports.utcParse = utcParse;\\n  exports.warn = warn;\\n  exports.windowSize = windowSize;\\n\\n  Object.defineProperty(exports, '__esModule', { value: true });\\n\\n})));\\n\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"factory\",\"define\",\"amd\",\"globalThis\",\"self\",\"vega\",\"d3\",\"vegaUtil\",\"vegaExpression\",\"d3Geo\",\"d3Color\",\"vegaDataflow\",\"vegaScale\",\"vegaScenegraph\",\"vegaSelections\",\"vegaStatistics\",\"vegaTime\",\"d3Array\",\"data\",\"name\",\"context\",\"values\",\"value\",\"indata\",\"field\",\"entry\",\"index\",\"get\",\"undefined\",\"count\",\"setdata\",\"tuples\",\"df\",\"dataflow\",\"pulse\",\"input\",\"changeset\",\"remove\",\"truthy\",\"insert\",\"encode\",\"item\",\"retval\",\"mark\",\"source\",\"time\",\"month\",\"day\",\"specifier\",\"Number\",\"isInteger\",\"dateObj\",\"setYear\",\"setMonth\",\"setDate\",\"timeFormat\",\"call\",\"monthFormat\",\"monthAbbrevFormat\",\"dayFormat\",\"dayAbbrevFormat\",\"dataVisitor\",\"args\",\"scope\",\"params\",\"type\",\"Literal\",\"error\",\"dataName\",\"DataPrefix\",\"hasOwnProperty\",\"getData\",\"tuplesRef\",\"err\",\"indataVisitor\",\"indexName\",\"IndexPrefix\",\"indataRef\",\"scaleVisitor\",\"addScaleDependency\",\"scales\",\"scaleName\",\"ScalePrefix\",\"scaleRef\",\"getScale\",\"ctx\",\"s\",\"isFunction\",\"isString\",\"internalScaleFunctions\",\"codegen\",\"fnctx\",\"visitors\",\"__bandwidth\",\"fnctx.__bandwidth\",\"bandwidth\",\"_bandwidth\",\"_range\",\"_scale\",\"ref\",\"arg\",\"stringValue\",\"geoMethod\",\"methodName\",\"globalMethod\",\"projection\",\"geojson\",\"group\",\"p\",\"path\",\"inScope\",\"log\",\"method\",\"apply\",\"concat\",\"slice\",\"warn\",\"length\",\"arguments\",\"info\",\"debug\",\"channel_luminance_value\",\"channelValue\",\"val\",\"Math\",\"pow\",\"luminance\",\"color\",\"c\",\"rgb\",\"r\",\"g\",\"b\",\"contrast\",\"color1\",\"color2\",\"lum1\",\"lum2\",\"lumL\",\"max\",\"lumD\",\"min\",\"merge\",\"unshift\",\"extend\",\"equal\",\"a\",\"i\",\"n\",\"equalObject\",\"key\",\"removePredicate\",\"props\",\"_\",\"modify\",\"toggle\",\"stamp\",\"changes\",\"_trigger\",\"runAfter\",\"modified\",\"run\",\"predicate\",\"isArray\",\"isTuple\",\"some\",\"pinchDistance\",\"event\",\"t\",\"touches\",\"dx\",\"clientX\",\"dy\",\"clientY\",\"sqrt\",\"pinchAngle\",\"atan2\",\"bandspace\",\"paddingInner\",\"paddingOuter\",\"bandSpace\",\"copy\",\"domain\",\"invert\",\"range\",\"invertRange\",\"invertExtent\",\"scale\",\"scaleGradient\",\"p0\",\"p1\",\"gradient\",\"Gradient\",\"stops\",\"peek\",\"fraction\",\"identity\",\"scaleFraction\",\"interpolator\",\"interpolate\",\"ticks\",\"push\",\"forEach\",\"stop\",\"geoShape\",\"pathShape\",\"pathRender\",\"pathParse\",\"treeNodes\",\"tree\",\"root\",\"lookup\",\"treePath\",\"target\",\"nodes\",\"map\",\"datum\",\"treeAncestors\",\"node\",\"ancestors\",\"screen\",\"w\",\"window\",\"windowSize\",\"innerWidth\",\"innerHeight\",\"containerSize\",\"view\",\"el\",\"container\",\"clientWidth\",\"clientHeight\",\"filter\",\"opt\",\"types\",\"array\",\"marktype\",\"names\",\"markname\",\"expressionFunction\",\"fn\",\"visitor\",\"functionContext\",\"astVisitors\",\"codeGenerator\",\"functions\",\"thisPrefix\",\"wrap\",\"spec\",\"locale\",\"format\",\"utcFormat\",\"timeParse\",\"utcParse\",\"Date\",\"geoArea\",\"geoBounds\",\"geoCentroid\",\"d\",\"random\",\"cumulativeNormal\",\"cumulativeLogNormal\",\"cumulativeUniform\",\"densityNormal\",\"densityLogNormal\",\"densityUniform\",\"quantileNormal\",\"quantileLogNormal\",\"quantileUniform\",\"sampleNormal\",\"sampleLogNormal\",\"sampleUniform\",\"isBoolean\",\"isDate\",\"isDefined\",\"isNumber\",\"isObject\",\"isRegExp\",\"isValid\",\"toBoolean\",\"toDate\",\"toNumber\",\"toString\",\"flush\",\"lerp\",\"pad\",\"span\",\"inrange\",\"truncate\",\"lab\",\"hcl\",\"hsl\",\"sequence\",\"utcOffset\",\"utcSequence\",\"timeOffset\",\"timeSequence\",\"timeUnitSpecifier\",\"quarter\",\"utcquarter\",\"week\",\"utcweek\",\"dayofyear\",\"utcdayofyear\",\"extent\",\"intersect\",\"u\",\"v\",\"box\",\"Bounds\",\"set\",\"scene\",\"scenegraph\",\"clampRange\",\"panLinear\",\"panLog\",\"panPow\",\"panSymlog\",\"zoomLinear\",\"zoomLog\",\"zoomPow\",\"zoomSymlog\",\"eventFunctions\",\"codegenParams\",\"blacklist\",\"whitelist\",\"fieldvar\",\"globalvar\",\"id\",\"SignalPrefix\",\"buildFunctions\",\"eventPrefix\",\"constants\",\"selectionTest\",\"selectionVisitor\",\"selectionResolve\",\"parseExpression\",\"parser\",\"expr\",\"ast\",\"parse\",\"visit\",\"CallExpression\",\"callee\",\"gen\",\"globals\",\"signalName\",\"getSignal\",\"signalRef\",\"$expr\",\"code\",\"options\",\"$fields\",\"fields\",\"$params\",\"Object\",\"defineProperty\"]\n}\n"]